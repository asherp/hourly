



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
    
      
        <title>Stripe - Hourly</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/application.1b62728e.css">
      
      
    
    
      <script src="assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#stripe" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="index.html" title="Hourly" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Hourly
            </span>
            <span class="md-header-nav__topic">
              
                Stripe
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="index.html" title="Hourly" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Hourly
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="index.html" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="Payments.html" title="Invoicing" class="md-nav__link">
      Invoicing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="README.html" title="Time Estimation" class="md-nav__link">
      Time Estimation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="Compensation.html" title="Compensation" class="md-nav__link">
      Compensation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="WorkLog.html" title="WorkLog" class="md-nav__link">
      WorkLog
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="FAQ.html" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="press-release.html" title="Press release" class="md-nav__link">
      Press release
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="about.html" title="Author's notes" class="md-nav__link">
      Author's notes
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#stripe" class="md-nav__link">
    Stripe
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stripe-setup" class="md-nav__link">
    Stripe Setup
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-install-the-stripe-python-api" class="md-nav__link">
    Step 1 - install the stripe python api:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-create-a-stripe-account" class="md-nav__link">
    Step 2 - Create a stripe account
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-set-environment-variables" class="md-nav__link">
    Step 3 - Set environment variables
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hourly-configuration" class="md-nav__link">
    Hourly Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generating-stripe-invoices" class="md-nav__link">
    Generating Stripe invoices
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Stripe</h1>
                
                <h2 id="stripe">Stripe<a class="headerlink" href="#stripe" title="Permanent link">#</a></h2>
<p><a href="https://stripe.com/">Stripe</a> is a popular global payment processing platform for credit cards. They have an <a href="https://stripe.com/docs/billing/invoices/sending">invoice API</a> that allows hourly to issue invoices on your behalf in a single command:</p>
<p><code>hourly-report invoice=stripe stripe.customer.email=my.client@momandpop.com</code></p>
<h3 id="stripe-setup">Stripe Setup<a class="headerlink" href="#stripe-setup" title="Permanent link">#</a></h3>
<h4 id="step-1-install-the-stripe-python-api">Step 1 - install the stripe python api:<a class="headerlink" href="#step-1-install-the-stripe-python-api" title="Permanent link">#</a></h4>
<p><code>pip install --upgrade stripe</code></p>
<h4 id="step-2-create-a-stripe-account">Step 2 - Create a stripe account<a class="headerlink" href="#step-2-create-a-stripe-account" title="Permanent link">#</a></h4>
<p>You will need an account at <a href="https://stripe.com/">Stripe</a>. Be sure to follow the steps for a developer looking to handle one-time payments. You should also set up your <a href="https://dashboard.stripe.com/account/billing/invoice">invoice template settings</a>.</p>
<h4 id="step-3-set-environment-variables">Step 3 - Set environment variables<a class="headerlink" href="#step-3-set-environment-variables" title="Permanent link">#</a></h4>
<p>From the Stripe <a href="https://dashboard.stripe.com/apikeys">dashboard</a>:</p>
<ul>
<li>copy the <code>Secret key</code> and set it as an environment variable <code>STRIPE_API_SECRET_KEY</code></li>
</ul>
<p>You can also paste in the <code>Secret key</code> later as a command-line argument argument to hourly: <code>stripe.secret_key=&lt;your stripe secret key&gt;</code></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You will probably want to use your <code>test_</code> API keys first!</p>
</div>
<h3 id="hourly-configuration">Hourly Configuration<a class="headerlink" href="#hourly-configuration" title="Permanent link">#</a></h3>
<p>Hourly provides the following default configuration for stripe invoices:</p>
<div class="codehilite"><pre><span></span><span class="nt">invoice</span><span class="p">:</span>
  <span class="c1"># see https://stripe.com/docs/billing/invoices/create-invoice#python</span>
  <span class="nt">stripe</span><span class="p">:</span>
    <span class="nt">secret_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">${env:STRIPE_API_SECRET_KEY}</span>
    <span class="nt">customer</span><span class="p">:</span>
      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
      <span class="nt">email</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
      <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span>
    <span class="nt">customer_id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">null</span> <span class="c1"># skips customer creation if set</span>
    <span class="nt">invoice_item</span><span class="p">:</span>
      <span class="nt">customer</span><span class="p">:</span> <span class="c1"># overridden by customer_id</span>
      <span class="nt">amount</span><span class="p">:</span> <span class="c1"># overrides earnings</span>
      <span class="nt">currency</span><span class="p">:</span> <span class="c1">#  overrides compensation currency</span>
      <span class="nt">description</span><span class="p">:</span> <span class="c1"># overrides &lt;hours worked&gt; from repo.start_date to repo.end_date</span>
    <span class="nt">invoice</span><span class="p">:</span>
      <span class="nt">customer</span><span class="p">:</span> <span class="c1"># overridden by customer_id</span>
      <span class="nt">collection_method</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">send_invoice</span>
      <span class="nt">days_until_due</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">30</span>
      <span class="nt">auto_advance</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span> <span class="c1"># auto-finalize this draft after ~1 hour.</span>
      <span class="nt">footer</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Time sheet generated by hourly</span>
    <span class="nt">send_invoice</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span> <span class="c1"># sends invoice to customer.email immediately</span>
    <span class="nt">return_status</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
    <span class="nt">logging</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">40</span> <span class="c1"># https://docs.python.org/3/library/logging.html#logging-level</span>
</pre></div>


<p>The following fields are subsets of stripe's own API, which has additional fields you can use:</p>
<ul>
<li><a href="https://stripe.com/docs/api/invoices/line_item">invoice_item</a></li>
<li><a href="https://stripe.com/docs/api/customers/create">customer</a></li>
<li><a href="https://stripe.com/docs/api/invoices/create">invoice</a> </li>
</ul>
<p>Any of the defaults can be overridden, either at command line or by your project's <a href="index.html#configuration">configuration override</a>.
However, <code>stripe.customer.email</code> is a required field.</p>
<h3 id="generating-stripe-invoices">Generating Stripe invoices<a class="headerlink" href="#generating-stripe-invoices" title="Permanent link">#</a></h3>
<p>To generate a stripe invoice for your repo, you will need to specify an email address. Hourly will prepare an invoice and ask for confirmation.
Here is an example of what that looks like when I run hourly on the hourly repo:</p>
<p><code>hourly-report invoice=stripe repo.start_date="Jan 1, 2020" stripe.customer.email=apembroke+hourly@gmail.com"</code></p>
<div class="codehilite"><pre><span></span><span class="go">1 days 04:02:14, 28.04 hours worked</span>
<span class="go">2803.72 USD</span>
<span class="go">Generating stripe invoice for Asher Pembroke</span>
<span class="go">creating new customer</span>
<span class="go">new customer_id: cus_GVy3BWS792lu4D</span>
<span class="go">customer:</span>
<span class="go">  description: null</span>
<span class="go">  email: apembroke+hourly@gmail.com</span>
<span class="go">  name: null</span>
<span class="go">customer_id: cus_GVy3BWS792lu4D</span>
<span class="go">invoice:</span>
<span class="go">  auto_advance: false</span>
<span class="go">  collection_method: send_invoice</span>
<span class="go">  customer: cus_GVy3BWS792lu4D</span>
<span class="go">  days_until_due: 30</span>
<span class="go">  footer: Time sheet generated by hourly</span>
<span class="go">invoice_item:</span>
<span class="go">  amount: 280373</span>
<span class="go">  currency: usd</span>
<span class="go">  customer: cus_GVy3BWS792lu4D</span>
<span class="go">  description: 28.04 hours worked from 2020-01-03T18:44:04-05:00 to 2020-01-09T02:04:18-05:00</span>
<span class="go">logging: 40</span>
<span class="go">return_status: false</span>
<span class="go">secret_key: ${env:STRIPE_API_SECRET_KEY}</span>
<span class="go">send_invoice: true</span>

<span class="go">Is this correct? (yes/n): yes</span>
<span class="go">Success!</span>
<span class="go">Invoice will be sent to apembroke+hourly@gmail.com</span>
<span class="go">Invoice may be paid at https://pay.stripe.com/invoice/&lt;---- redacted -----&gt;</span>
<span class="go">View your invoice at https://dashboard.stripe.com</span>
</pre></div>


<div class="admonition note">
<p class="admonition-title">Note</p>
<p>I have redacted actual payment URL </p>
</div>
<p>The recipient should get an email from stripe to pay by credit card. 
You can test credit card payment using one of their <a href="https://stripe.com/docs/testing#cards">testing cards</a>.
Meanwhile, visiting the url should show you a page like this:</p>
<p><img alt="Stripe Invoice" src="https://github.com/asherp/hourly/raw/master/docs/invoice_stripe.PNG" title="Stripe Invoice" /></p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/application.808e90bb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"."}})</script>
      
    
  </body>
</html>