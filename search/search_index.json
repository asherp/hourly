{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"README.html","text":"Tutorial # We can illustrate how to use hourly by looking at the hourly repo itself. git clone https://github.com/asherp/hourly.git cd hourly from hourly import get_work_commits get_work_commits gathers all commits into a pandas array work , repo = get_work_commits ( '..' ) work . head () .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } message hash name email time 2018-10-19 23:40:41-04:00 Initial commit ef5690543bfb354b9325d1fbd1f9abbaf... Asher Pembroke apembroke@gmail.com 2018-10-19 23:57:48-04:00 clock in 5c8f05b57b739ec525291c248ea920065... Asher Pembroke apembroke@gmail.com 2018-10-20 00:21:40-04:00 preparing setup.py 254ecdacb52fc70bc358f8d55be58df3b... Asher Pembroke apembroke@gmail.com 2018-10-20 00:39:11-04:00 clock out - work done for the day 0e33fa3d74f663f954b05dd9f30e0128c... Asher Pembroke apembroke@gmail.com 2018-10-20 01:06:08-04:00 clock in - start adding requireme... dc065b17337b14c2f8e0458de61e6880a... Asher Pembroke apembroke@gmail.com get_labor calculates hours worked by differencing commit timestamps and raises an error if clock in and clock out are of different lengths. Getting time card # First we filter by commit messages containing \"clock\" from hourly import get_clocks , get_labor work . head ( 8 ) .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } message hash name email time 2018-10-19 23:40:41-04:00 Initial commit ef5690543bfb354b9325d1fbd1f9abbaf... Asher Pembroke apembroke@gmail.com 2018-10-19 23:57:48-04:00 clock in 5c8f05b57b739ec525291c248ea920065... Asher Pembroke apembroke@gmail.com 2018-10-20 00:21:40-04:00 preparing setup.py 254ecdacb52fc70bc358f8d55be58df3b... Asher Pembroke apembroke@gmail.com 2018-10-20 00:39:11-04:00 clock out - work done for the day 0e33fa3d74f663f954b05dd9f30e0128c... Asher Pembroke apembroke@gmail.com 2018-10-20 01:06:08-04:00 clock in - start adding requireme... dc065b17337b14c2f8e0458de61e6880a... Asher Pembroke apembroke@gmail.com 2018-10-20 01:47:01-04:00 clock out 644ad6ebf4c9015fd512ed47b858602d7... Asher Pembroke apembroke@gmail.com 2018-10-20 01:47:45-04:00 clock in - pro bono e6b5f78daa68e3731f82effccb66fd4bd... Asher Pembroke apembroke@gmail.com 2018-10-20 01:51:36-04:00 clock out - pro bono 1aff88af5e9688645966ccd15da8e1530... Asher Pembroke apembroke@gmail.com Choose start and end dates (timezones have to match) start_date , end_date = work . index [[ 0 , 25 ]] start_date , end_date (Timestamp('2018-10-19 23:40:41-0400', tz='US/Eastern'), Timestamp('2018-11-23 14:14:38-0500', tz='US/Eastern')) Filter by clocks statements clocks = get_clocks ( work , start_date = start_date , end_date = end_date ) clocks .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } message hash name email time 2018-10-19 23:57:48-04:00 clock in 5c8f05b57b739ec525291c248ea920065... Asher Pembroke apembroke@gmail.com 2018-10-20 00:39:11-04:00 clock out - work done for the day 0e33fa3d74f663f954b05dd9f30e0128c... Asher Pembroke apembroke@gmail.com 2018-10-20 01:06:08-04:00 clock in - start adding requireme... dc065b17337b14c2f8e0458de61e6880a... Asher Pembroke apembroke@gmail.com 2018-10-20 01:47:01-04:00 clock out 644ad6ebf4c9015fd512ed47b858602d7... Asher Pembroke apembroke@gmail.com 2018-10-20 01:47:45-04:00 clock in - pro bono e6b5f78daa68e3731f82effccb66fd4bd... Asher Pembroke apembroke@gmail.com 2018-10-20 01:51:36-04:00 clock out - pro bono 1aff88af5e9688645966ccd15da8e1530... Asher Pembroke apembroke@gmail.com 2018-10-20 02:03:56-04:00 clock in - finishing tutorial 53bd7316e579d8582c46af09277b40fbb... Asher Pembroke apembroke@gmail.com 2018-10-20 02:11:54-04:00 clock out - converted notebook fo... d55b5718a3178ab6161f7e3a148c6561a... Asher Pembroke apembroke@gmail.com 2018-10-20 02:14:21-04:00 had to clock out so notebook exam... d9ec537b36475b565df6b28d0cab6edc3... Asher Pembroke apembroke@gmail.com 2018-10-20 11:53:00-04:00 clock in - handling errant messages fa615994ba6b771594d711dea6087cc7b... Asher Pembroke apembroke@gmail.com 2018-10-20 13:16:13-04:00 clock out - converting to pd.Time... ed7aab29e43e7120428816481216198a2... Asher Pembroke apembroke@gmail.com 2018-10-20 13:47:56-04:00 clock in - adding work log 5b398037bf24cd503a7fc88c3b078913f... Asher Pembroke apembroke@gmail.com 2018-10-20 14:33:35-04:00 clock out - see WorkLog.md 93c2aa04aeba7cfe1573205abec053c7d... Asher Pembroke apembroke@gmail.com 2018-10-28 13:44:48-04:00 clock in c4e95f59dc0c8ce296a40300760ab6880... Asher Pembroke apembroke@gmail.com 2018-10-28 13:56:35-04:00 clock out f5200e718c062e828d436506286fd05e5... Asher Pembroke apembroke@gmail.com Handling errant clock in/out messages # If you mistakenly put \"clock out\" in a message, hourly will interpret the message as a legitimate end time. This will likely raise an error when computing the labor. For example, there is a problematic commit in the this repo's history: clocks [ clocks . hash == 'd9ec537b36475b565df6b28d0cab6edc3a89f2da' ] .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } message hash name email time 2018-10-20 02:14:21-04:00 had to clock out so notebook exam... d9ec537b36475b565df6b28d0cab6edc3... Asher Pembroke apembroke@gmail.com When we include this in our labor calculation, we get the following error: try : get_labor ( clocks ) except ValueError as e : print ( e ) pay period: 2018-10-19 23:57:48-04:00 -> 2018-10-28 13:56:35-04:00 In/Out logs do not match: clock ins:7, clock outs:8 We can skip this errant commit by setting errant_clocks clocks = get_clocks ( work , start_date = start_date , end_date = end_date , errant_clocks = [ 'd9ec537b36475b565df6b28d0cab6edc3a89f2da' ], ) Finally we can generate a timesheet: labor = get_labor ( clocks ) labor pay period: 2018-10-19 23:57:48-04:00 -> 2018-10-28 13:56:35-04:00 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } TimeIn LogIn ... TimeDelta Hours 0 2018-10-19 23:57:48-04:00 clock in ... 00:41:23 0.689722 1 2018-10-20 01:06:08-04:00 clock in - start adding requireme... ... 00:40:53 0.681389 2 2018-10-20 01:47:45-04:00 clock in - pro bono ... 00:03:51 0.064167 3 2018-10-20 02:03:56-04:00 clock in - finishing tutorial ... 00:07:58 0.132778 4 2018-10-20 11:53:00-04:00 clock in - handling errant messages ... 01:23:13 1.386944 5 2018-10-20 13:47:56-04:00 clock in - adding work log ... 00:45:39 0.760833 6 2018-10-28 13:44:48-04:00 clock in ... 00:11:47 0.196389 7 rows \u00d7 10 columns Filtering work session keywords # Use the \"ignore\" key word to skip any work you don't want to include in your invoices. labor = get_labor ( clocks , ignore = 'pro bono' ) labor pay period: 2018-10-19 23:57:48-04:00 -> 2018-10-28 13:56:35-04:00 ignoring pro bono .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } TimeIn LogIn ... TimeDelta Hours 0 2018-10-19 23:57:48-04:00 clock in ... 00:41:23 0.689722 1 2018-10-20 01:06:08-04:00 clock in - start adding requireme... ... 00:40:53 0.681389 3 2018-10-20 02:03:56-04:00 clock in - finishing tutorial ... 00:07:58 0.132778 4 2018-10-20 11:53:00-04:00 clock in - handling errant messages ... 01:23:13 1.386944 5 2018-10-20 13:47:56-04:00 clock in - adding work log ... 00:45:39 0.760833 6 2018-10-28 13:44:48-04:00 clock in ... 00:11:47 0.196389 6 rows \u00d7 10 columns Get total earnings # Total earnings can be found using this function. Currency is just a string for printing, but in the future we can add unit conversion. from hourly import get_hours_worked , get_earnings get_hours_worked ( labor ) 3.848055555555556 get_earnings ( get_hours_worked ( labor ), wage = 80 , currency = 'USD' ) 307 . 84 USD 307 . 84 Time adjustment # If you forget to clock in or clock out, you can correct your time sheet by adjusting your clock time. work , repo = get_work_commits ( '..' ) # reports actual work time, according to commit message work = work [ work . message . str . contains ( 'T-' )] . drop ([ 'name' , 'email' ], axis = 1 ) work .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } message hash time 2019-02-25 11:19:10-05:00 clock in T-1hr d7add63b4d2e3e1ca1423296aaed25d9c... 2019-02-25 12:54:51-05:00 clock out T-5m acfb8596317786e38177345aa25310980... 2019-03-16 19:12:25-04:00 clock in T-10m aa96bfaf35ab22c24c8ab8dfa3f2580ca... 2019-03-20 20:56:27-04:00 clock in T-10m 7484e4679022a65b4e24e54fb35f8904b... 2019-04-09 00:50:52-04:00 clock in T-5m 88b7abade22835c17c32c47959b5bb50f... 2019-04-11 03:12:13-04:00 clock-in: T-1h 12580fe0f7e96e24987b023dba3ee5556... 2019-04-13 03:24:44-04:00 clock-in: T-45m c6b53a3ecbf0f76f7e174088178511515... 2019-06-19 15:56:37-04:00 clock-out: T-5m 30de457a2dc24ca1cc922caaca1bbff6b... 2019-08-08 00:51:23-04:00 clock-out: T-15m 7f217173d54ac7074514b5d284aa4ed9a... 2019-08-14 01:03:57-04:00 clock-in: T-1h22m 11f6c9adeee806bbc65f4ea2c76ed49e1... 2019-08-14 01:12:41-04:00 clock-in: T-7m 07a334a28d89d108c1ffdd0ebf2f0bde8... 2019-12-23 13:06:57-05:00 clock-in: T-30m f4c47e6484a22fb2231da68a6addd4af0... The above work commits contain time adjustments. By default, get_clocks adjusts time stamps automatically when a commit message contains the keyword T- . clocks = get_clocks ( work ) clocks .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } message hash time 2019-02-25 10:19:10-05:00 clock in T-1hr d7add63b4d2e3e1ca1423296aaed25d9c... 2019-02-25 12:49:51-05:00 clock out T-5m acfb8596317786e38177345aa25310980... 2019-03-16 19:02:25-04:00 clock in T-10m aa96bfaf35ab22c24c8ab8dfa3f2580ca... 2019-03-20 20:46:27-04:00 clock in T-10m 7484e4679022a65b4e24e54fb35f8904b... 2019-04-09 00:45:52-04:00 clock in T-5m 88b7abade22835c17c32c47959b5bb50f... 2019-04-11 02:12:13-04:00 clock-in: T-1h 12580fe0f7e96e24987b023dba3ee5556... 2019-04-13 02:39:44-04:00 clock-in: T-45m c6b53a3ecbf0f76f7e174088178511515... 2019-06-19 15:51:37-04:00 clock-out: T-5m 30de457a2dc24ca1cc922caaca1bbff6b... 2019-08-08 00:36:23-04:00 clock-out: T-15m 7f217173d54ac7074514b5d284aa4ed9a... 2019-08-13 23:41:57-04:00 clock-in: T-1h22m 11f6c9adeee806bbc65f4ea2c76ed49e1... 2019-08-14 01:05:41-04:00 clock-in: T-7m 07a334a28d89d108c1ffdd0ebf2f0bde8... 2019-12-23 12:36:57-05:00 clock-in: T-30m f4c47e6484a22fb2231da68a6addd4af0... We can verify that the time adjustment works: clocks [ 'adjustment' ] = ( work . index - clocks . index ) clocks .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } message hash adjustment time 2019-02-25 10:19:10-05:00 clock in T-1hr d7add63b4d2e3e1ca1423296aaed25d9c... 01:00:00 2019-02-25 12:49:51-05:00 clock out T-5m acfb8596317786e38177345aa25310980... 00:05:00 2019-03-16 19:02:25-04:00 clock in T-10m aa96bfaf35ab22c24c8ab8dfa3f2580ca... 00:10:00 2019-03-20 20:46:27-04:00 clock in T-10m 7484e4679022a65b4e24e54fb35f8904b... 00:10:00 2019-04-09 00:45:52-04:00 clock in T-5m 88b7abade22835c17c32c47959b5bb50f... 00:05:00 2019-04-11 02:12:13-04:00 clock-in: T-1h 12580fe0f7e96e24987b023dba3ee5556... 01:00:00 2019-04-13 02:39:44-04:00 clock-in: T-45m c6b53a3ecbf0f76f7e174088178511515... 00:45:00 2019-06-19 15:51:37-04:00 clock-out: T-5m 30de457a2dc24ca1cc922caaca1bbff6b... 00:05:00 2019-08-08 00:36:23-04:00 clock-out: T-15m 7f217173d54ac7074514b5d284aa4ed9a... 00:15:00 2019-08-13 23:41:57-04:00 clock-in: T-1h22m 11f6c9adeee806bbc65f4ea2c76ed49e1... 01:22:00 2019-08-14 01:05:41-04:00 clock-in: T-7m 07a334a28d89d108c1ffdd0ebf2f0bde8... 00:07:00 2019-12-23 12:36:57-05:00 clock-in: T-30m f4c47e6484a22fb2231da68a6addd4af0... 00:30:00 get_labor ( clocks , match_logs = False ) pay period: 2019-02-25 10:19:10-05:00 -> 2019-12-23 12:36:57-05:00 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } TimeIn LogIn ... TimeDelta Hours 0 2019-02-25 10:19:10-05:00 clock in T-1hr ... 0 days 02:30:41 2.511389 1 2019-03-16 19:02:25-04:00 clock in T-10m ... 94 days 20:49:12 2276.820000 2 2019-03-20 20:46:27-04:00 clock in T-10m ... 140 days 03:49:56 3363.832222 3 rows \u00d7 8 columns The default behavior can be changed by setting adjust_clocks to False . clocks_raw = get_clocks ( work , adjust_clocks = False ) clocks_raw [ 'adjustment' ] = ( work . index - clocks_raw . index ) clocks_raw .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } message hash adjustment time 2019-02-25 11:19:10-05:00 clock in T-1hr d7add63b4d2e3e1ca1423296aaed25d9c... 0 days 2019-02-25 12:54:51-05:00 clock out T-5m acfb8596317786e38177345aa25310980... 0 days 2019-03-16 19:12:25-04:00 clock in T-10m aa96bfaf35ab22c24c8ab8dfa3f2580ca... 0 days 2019-03-20 20:56:27-04:00 clock in T-10m 7484e4679022a65b4e24e54fb35f8904b... 0 days 2019-04-09 00:50:52-04:00 clock in T-5m 88b7abade22835c17c32c47959b5bb50f... 0 days 2019-04-11 03:12:13-04:00 clock-in: T-1h 12580fe0f7e96e24987b023dba3ee5556... 0 days 2019-04-13 03:24:44-04:00 clock-in: T-45m c6b53a3ecbf0f76f7e174088178511515... 0 days 2019-06-19 15:56:37-04:00 clock-out: T-5m 30de457a2dc24ca1cc922caaca1bbff6b... 0 days 2019-08-08 00:51:23-04:00 clock-out: T-15m 7f217173d54ac7074514b5d284aa4ed9a... 0 days 2019-08-14 01:03:57-04:00 clock-in: T-1h22m 11f6c9adeee806bbc65f4ea2c76ed49e1... 0 days 2019-08-14 01:12:41-04:00 clock-in: T-7m 07a334a28d89d108c1ffdd0ebf2f0bde8... 0 days 2019-12-23 13:06:57-05:00 clock-in: T-30m f4c47e6484a22fb2231da68a6addd4af0... 0 days Note Only time subtractions are supported for now: it's easy to forget to clock in/out, but I can't think of a reason to clock-in sometime in the future. Tip Hourly uses pandas' Timedelta format to modify times. This allows for syntax like clock in T-1hr45","title":"Time Estimation"},{"location":"README.html#tutorial","text":"We can illustrate how to use hourly by looking at the hourly repo itself. git clone https://github.com/asherp/hourly.git cd hourly from hourly import get_work_commits get_work_commits gathers all commits into a pandas array work , repo = get_work_commits ( '..' ) work . head () .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } message hash name email time 2018-10-19 23:40:41-04:00 Initial commit ef5690543bfb354b9325d1fbd1f9abbaf... Asher Pembroke apembroke@gmail.com 2018-10-19 23:57:48-04:00 clock in 5c8f05b57b739ec525291c248ea920065... Asher Pembroke apembroke@gmail.com 2018-10-20 00:21:40-04:00 preparing setup.py 254ecdacb52fc70bc358f8d55be58df3b... Asher Pembroke apembroke@gmail.com 2018-10-20 00:39:11-04:00 clock out - work done for the day 0e33fa3d74f663f954b05dd9f30e0128c... Asher Pembroke apembroke@gmail.com 2018-10-20 01:06:08-04:00 clock in - start adding requireme... dc065b17337b14c2f8e0458de61e6880a... Asher Pembroke apembroke@gmail.com get_labor calculates hours worked by differencing commit timestamps and raises an error if clock in and clock out are of different lengths.","title":"Tutorial"},{"location":"README.html#getting-time-card","text":"First we filter by commit messages containing \"clock\" from hourly import get_clocks , get_labor work . head ( 8 ) .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } message hash name email time 2018-10-19 23:40:41-04:00 Initial commit ef5690543bfb354b9325d1fbd1f9abbaf... Asher Pembroke apembroke@gmail.com 2018-10-19 23:57:48-04:00 clock in 5c8f05b57b739ec525291c248ea920065... Asher Pembroke apembroke@gmail.com 2018-10-20 00:21:40-04:00 preparing setup.py 254ecdacb52fc70bc358f8d55be58df3b... Asher Pembroke apembroke@gmail.com 2018-10-20 00:39:11-04:00 clock out - work done for the day 0e33fa3d74f663f954b05dd9f30e0128c... Asher Pembroke apembroke@gmail.com 2018-10-20 01:06:08-04:00 clock in - start adding requireme... dc065b17337b14c2f8e0458de61e6880a... Asher Pembroke apembroke@gmail.com 2018-10-20 01:47:01-04:00 clock out 644ad6ebf4c9015fd512ed47b858602d7... Asher Pembroke apembroke@gmail.com 2018-10-20 01:47:45-04:00 clock in - pro bono e6b5f78daa68e3731f82effccb66fd4bd... Asher Pembroke apembroke@gmail.com 2018-10-20 01:51:36-04:00 clock out - pro bono 1aff88af5e9688645966ccd15da8e1530... Asher Pembroke apembroke@gmail.com Choose start and end dates (timezones have to match) start_date , end_date = work . index [[ 0 , 25 ]] start_date , end_date (Timestamp('2018-10-19 23:40:41-0400', tz='US/Eastern'), Timestamp('2018-11-23 14:14:38-0500', tz='US/Eastern')) Filter by clocks statements clocks = get_clocks ( work , start_date = start_date , end_date = end_date ) clocks .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } message hash name email time 2018-10-19 23:57:48-04:00 clock in 5c8f05b57b739ec525291c248ea920065... Asher Pembroke apembroke@gmail.com 2018-10-20 00:39:11-04:00 clock out - work done for the day 0e33fa3d74f663f954b05dd9f30e0128c... Asher Pembroke apembroke@gmail.com 2018-10-20 01:06:08-04:00 clock in - start adding requireme... dc065b17337b14c2f8e0458de61e6880a... Asher Pembroke apembroke@gmail.com 2018-10-20 01:47:01-04:00 clock out 644ad6ebf4c9015fd512ed47b858602d7... Asher Pembroke apembroke@gmail.com 2018-10-20 01:47:45-04:00 clock in - pro bono e6b5f78daa68e3731f82effccb66fd4bd... Asher Pembroke apembroke@gmail.com 2018-10-20 01:51:36-04:00 clock out - pro bono 1aff88af5e9688645966ccd15da8e1530... Asher Pembroke apembroke@gmail.com 2018-10-20 02:03:56-04:00 clock in - finishing tutorial 53bd7316e579d8582c46af09277b40fbb... Asher Pembroke apembroke@gmail.com 2018-10-20 02:11:54-04:00 clock out - converted notebook fo... d55b5718a3178ab6161f7e3a148c6561a... Asher Pembroke apembroke@gmail.com 2018-10-20 02:14:21-04:00 had to clock out so notebook exam... d9ec537b36475b565df6b28d0cab6edc3... Asher Pembroke apembroke@gmail.com 2018-10-20 11:53:00-04:00 clock in - handling errant messages fa615994ba6b771594d711dea6087cc7b... Asher Pembroke apembroke@gmail.com 2018-10-20 13:16:13-04:00 clock out - converting to pd.Time... ed7aab29e43e7120428816481216198a2... Asher Pembroke apembroke@gmail.com 2018-10-20 13:47:56-04:00 clock in - adding work log 5b398037bf24cd503a7fc88c3b078913f... Asher Pembroke apembroke@gmail.com 2018-10-20 14:33:35-04:00 clock out - see WorkLog.md 93c2aa04aeba7cfe1573205abec053c7d... Asher Pembroke apembroke@gmail.com 2018-10-28 13:44:48-04:00 clock in c4e95f59dc0c8ce296a40300760ab6880... Asher Pembroke apembroke@gmail.com 2018-10-28 13:56:35-04:00 clock out f5200e718c062e828d436506286fd05e5... Asher Pembroke apembroke@gmail.com","title":"Getting time card"},{"location":"README.html#handling-errant-clock-inout-messages","text":"If you mistakenly put \"clock out\" in a message, hourly will interpret the message as a legitimate end time. This will likely raise an error when computing the labor. For example, there is a problematic commit in the this repo's history: clocks [ clocks . hash == 'd9ec537b36475b565df6b28d0cab6edc3a89f2da' ] .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } message hash name email time 2018-10-20 02:14:21-04:00 had to clock out so notebook exam... d9ec537b36475b565df6b28d0cab6edc3... Asher Pembroke apembroke@gmail.com When we include this in our labor calculation, we get the following error: try : get_labor ( clocks ) except ValueError as e : print ( e ) pay period: 2018-10-19 23:57:48-04:00 -> 2018-10-28 13:56:35-04:00 In/Out logs do not match: clock ins:7, clock outs:8 We can skip this errant commit by setting errant_clocks clocks = get_clocks ( work , start_date = start_date , end_date = end_date , errant_clocks = [ 'd9ec537b36475b565df6b28d0cab6edc3a89f2da' ], ) Finally we can generate a timesheet: labor = get_labor ( clocks ) labor pay period: 2018-10-19 23:57:48-04:00 -> 2018-10-28 13:56:35-04:00 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } TimeIn LogIn ... TimeDelta Hours 0 2018-10-19 23:57:48-04:00 clock in ... 00:41:23 0.689722 1 2018-10-20 01:06:08-04:00 clock in - start adding requireme... ... 00:40:53 0.681389 2 2018-10-20 01:47:45-04:00 clock in - pro bono ... 00:03:51 0.064167 3 2018-10-20 02:03:56-04:00 clock in - finishing tutorial ... 00:07:58 0.132778 4 2018-10-20 11:53:00-04:00 clock in - handling errant messages ... 01:23:13 1.386944 5 2018-10-20 13:47:56-04:00 clock in - adding work log ... 00:45:39 0.760833 6 2018-10-28 13:44:48-04:00 clock in ... 00:11:47 0.196389 7 rows \u00d7 10 columns","title":"Handling errant clock in/out messages"},{"location":"README.html#filtering-work-session-keywords","text":"Use the \"ignore\" key word to skip any work you don't want to include in your invoices. labor = get_labor ( clocks , ignore = 'pro bono' ) labor pay period: 2018-10-19 23:57:48-04:00 -> 2018-10-28 13:56:35-04:00 ignoring pro bono .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } TimeIn LogIn ... TimeDelta Hours 0 2018-10-19 23:57:48-04:00 clock in ... 00:41:23 0.689722 1 2018-10-20 01:06:08-04:00 clock in - start adding requireme... ... 00:40:53 0.681389 3 2018-10-20 02:03:56-04:00 clock in - finishing tutorial ... 00:07:58 0.132778 4 2018-10-20 11:53:00-04:00 clock in - handling errant messages ... 01:23:13 1.386944 5 2018-10-20 13:47:56-04:00 clock in - adding work log ... 00:45:39 0.760833 6 2018-10-28 13:44:48-04:00 clock in ... 00:11:47 0.196389 6 rows \u00d7 10 columns","title":"Filtering work session keywords"},{"location":"README.html#get-total-earnings","text":"Total earnings can be found using this function. Currency is just a string for printing, but in the future we can add unit conversion. from hourly import get_hours_worked , get_earnings get_hours_worked ( labor ) 3.848055555555556 get_earnings ( get_hours_worked ( labor ), wage = 80 , currency = 'USD' ) 307 . 84 USD 307 . 84","title":"Get total earnings"},{"location":"README.html#time-adjustment","text":"If you forget to clock in or clock out, you can correct your time sheet by adjusting your clock time. work , repo = get_work_commits ( '..' ) # reports actual work time, according to commit message work = work [ work . message . str . contains ( 'T-' )] . drop ([ 'name' , 'email' ], axis = 1 ) work .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } message hash time 2019-02-25 11:19:10-05:00 clock in T-1hr d7add63b4d2e3e1ca1423296aaed25d9c... 2019-02-25 12:54:51-05:00 clock out T-5m acfb8596317786e38177345aa25310980... 2019-03-16 19:12:25-04:00 clock in T-10m aa96bfaf35ab22c24c8ab8dfa3f2580ca... 2019-03-20 20:56:27-04:00 clock in T-10m 7484e4679022a65b4e24e54fb35f8904b... 2019-04-09 00:50:52-04:00 clock in T-5m 88b7abade22835c17c32c47959b5bb50f... 2019-04-11 03:12:13-04:00 clock-in: T-1h 12580fe0f7e96e24987b023dba3ee5556... 2019-04-13 03:24:44-04:00 clock-in: T-45m c6b53a3ecbf0f76f7e174088178511515... 2019-06-19 15:56:37-04:00 clock-out: T-5m 30de457a2dc24ca1cc922caaca1bbff6b... 2019-08-08 00:51:23-04:00 clock-out: T-15m 7f217173d54ac7074514b5d284aa4ed9a... 2019-08-14 01:03:57-04:00 clock-in: T-1h22m 11f6c9adeee806bbc65f4ea2c76ed49e1... 2019-08-14 01:12:41-04:00 clock-in: T-7m 07a334a28d89d108c1ffdd0ebf2f0bde8... 2019-12-23 13:06:57-05:00 clock-in: T-30m f4c47e6484a22fb2231da68a6addd4af0... The above work commits contain time adjustments. By default, get_clocks adjusts time stamps automatically when a commit message contains the keyword T- . clocks = get_clocks ( work ) clocks .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } message hash time 2019-02-25 10:19:10-05:00 clock in T-1hr d7add63b4d2e3e1ca1423296aaed25d9c... 2019-02-25 12:49:51-05:00 clock out T-5m acfb8596317786e38177345aa25310980... 2019-03-16 19:02:25-04:00 clock in T-10m aa96bfaf35ab22c24c8ab8dfa3f2580ca... 2019-03-20 20:46:27-04:00 clock in T-10m 7484e4679022a65b4e24e54fb35f8904b... 2019-04-09 00:45:52-04:00 clock in T-5m 88b7abade22835c17c32c47959b5bb50f... 2019-04-11 02:12:13-04:00 clock-in: T-1h 12580fe0f7e96e24987b023dba3ee5556... 2019-04-13 02:39:44-04:00 clock-in: T-45m c6b53a3ecbf0f76f7e174088178511515... 2019-06-19 15:51:37-04:00 clock-out: T-5m 30de457a2dc24ca1cc922caaca1bbff6b... 2019-08-08 00:36:23-04:00 clock-out: T-15m 7f217173d54ac7074514b5d284aa4ed9a... 2019-08-13 23:41:57-04:00 clock-in: T-1h22m 11f6c9adeee806bbc65f4ea2c76ed49e1... 2019-08-14 01:05:41-04:00 clock-in: T-7m 07a334a28d89d108c1ffdd0ebf2f0bde8... 2019-12-23 12:36:57-05:00 clock-in: T-30m f4c47e6484a22fb2231da68a6addd4af0... We can verify that the time adjustment works: clocks [ 'adjustment' ] = ( work . index - clocks . index ) clocks .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } message hash adjustment time 2019-02-25 10:19:10-05:00 clock in T-1hr d7add63b4d2e3e1ca1423296aaed25d9c... 01:00:00 2019-02-25 12:49:51-05:00 clock out T-5m acfb8596317786e38177345aa25310980... 00:05:00 2019-03-16 19:02:25-04:00 clock in T-10m aa96bfaf35ab22c24c8ab8dfa3f2580ca... 00:10:00 2019-03-20 20:46:27-04:00 clock in T-10m 7484e4679022a65b4e24e54fb35f8904b... 00:10:00 2019-04-09 00:45:52-04:00 clock in T-5m 88b7abade22835c17c32c47959b5bb50f... 00:05:00 2019-04-11 02:12:13-04:00 clock-in: T-1h 12580fe0f7e96e24987b023dba3ee5556... 01:00:00 2019-04-13 02:39:44-04:00 clock-in: T-45m c6b53a3ecbf0f76f7e174088178511515... 00:45:00 2019-06-19 15:51:37-04:00 clock-out: T-5m 30de457a2dc24ca1cc922caaca1bbff6b... 00:05:00 2019-08-08 00:36:23-04:00 clock-out: T-15m 7f217173d54ac7074514b5d284aa4ed9a... 00:15:00 2019-08-13 23:41:57-04:00 clock-in: T-1h22m 11f6c9adeee806bbc65f4ea2c76ed49e1... 01:22:00 2019-08-14 01:05:41-04:00 clock-in: T-7m 07a334a28d89d108c1ffdd0ebf2f0bde8... 00:07:00 2019-12-23 12:36:57-05:00 clock-in: T-30m f4c47e6484a22fb2231da68a6addd4af0... 00:30:00 get_labor ( clocks , match_logs = False ) pay period: 2019-02-25 10:19:10-05:00 -> 2019-12-23 12:36:57-05:00 .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } TimeIn LogIn ... TimeDelta Hours 0 2019-02-25 10:19:10-05:00 clock in T-1hr ... 0 days 02:30:41 2.511389 1 2019-03-16 19:02:25-04:00 clock in T-10m ... 94 days 20:49:12 2276.820000 2 2019-03-20 20:46:27-04:00 clock in T-10m ... 140 days 03:49:56 3363.832222 3 rows \u00d7 8 columns The default behavior can be changed by setting adjust_clocks to False . clocks_raw = get_clocks ( work , adjust_clocks = False ) clocks_raw [ 'adjustment' ] = ( work . index - clocks_raw . index ) clocks_raw .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } message hash adjustment time 2019-02-25 11:19:10-05:00 clock in T-1hr d7add63b4d2e3e1ca1423296aaed25d9c... 0 days 2019-02-25 12:54:51-05:00 clock out T-5m acfb8596317786e38177345aa25310980... 0 days 2019-03-16 19:12:25-04:00 clock in T-10m aa96bfaf35ab22c24c8ab8dfa3f2580ca... 0 days 2019-03-20 20:56:27-04:00 clock in T-10m 7484e4679022a65b4e24e54fb35f8904b... 0 days 2019-04-09 00:50:52-04:00 clock in T-5m 88b7abade22835c17c32c47959b5bb50f... 0 days 2019-04-11 03:12:13-04:00 clock-in: T-1h 12580fe0f7e96e24987b023dba3ee5556... 0 days 2019-04-13 03:24:44-04:00 clock-in: T-45m c6b53a3ecbf0f76f7e174088178511515... 0 days 2019-06-19 15:56:37-04:00 clock-out: T-5m 30de457a2dc24ca1cc922caaca1bbff6b... 0 days 2019-08-08 00:51:23-04:00 clock-out: T-15m 7f217173d54ac7074514b5d284aa4ed9a... 0 days 2019-08-14 01:03:57-04:00 clock-in: T-1h22m 11f6c9adeee806bbc65f4ea2c76ed49e1... 0 days 2019-08-14 01:12:41-04:00 clock-in: T-7m 07a334a28d89d108c1ffdd0ebf2f0bde8... 0 days 2019-12-23 13:06:57-05:00 clock-in: T-30m f4c47e6484a22fb2231da68a6addd4af0... 0 days Note Only time subtractions are supported for now: it's easy to forget to clock in/out, but I can't think of a reason to clock-in sometime in the future. Tip Hourly uses pandas' Timedelta format to modify times. This allows for syntax like clock in T-1hr45","title":"Time adjustment"},{"location":"index.html","text":"Hourly # Hourly is a command-line time tracking tool for git projects. Hourly parses your commit messages for clock-in and clock-out keywords to precisely estimate work hours. Designed for developers and project managers, hourly makes it easy to see how and where you spend your time. When configured with Stripe or BTCPay, hourly can generate invoices for your specified wage. Usage # Work sessions # To clock in: hourly-in The above command updates the header of your work log ( WorkLog.md by default) and commits it with the message \"clock-in\". Stage any changes to your code base. When you are ready to commit: hourly commit.message=\"my commit message\" Hourly updates the work log with your commit message. Feel free to use the work log to provide additional context. When you are finished committing other work for this session, you may clock out: hourly-out Again, hourly updates the work log and commits it with the message \"clock-out\" along with any other staged files. Read more about configuring your work log . Timesheets # When you are ready to generate a timesheet for your repo, run hourly from your git directory: hourly-report Hourly parses all the commit messages for clock in/out keywords and uses git's timestamps to determine how long each session lasted. For example, here's what happens when you run hourly on the hourly repo itself : hourly-report repo.start_date=\"2018-10-21\" repo.end_date=\"2019-3-10\" repo.ignore=\"pro bono\" pay period: 2018-10-28 13:44:48-04:00 -> 2019-02-25 12:49:51-05:00 ignoring pro bono TimeIn LogIn TimeOut LogOut TimeDelta Hours 0 2018-10-28 13:44:48-04:00 clock in 2018-10-28 13:56:35-04:00 clock out 00:11:47 0.196389 1 2019-02-25 10:19:10-05:00 clock in T-1hr 2019-02-25 12:49:51-05:00 clock out T-5m 02:30:41 2.511389 0 days 02:42:28, 2.71 hours worked To save the timesheet as a csv file, include an ouput prefix: hourly-report repo.start_date=\"2018-10-21\" repo.end_date=\"2019-3-10\" repo.ignore=\"pro bono\" report.filename=Pembroke pay period: 2018-10-28 13:44:48-04:00 -> 2019-02-25 12:49:51-05:00 ignoring pro bono TimeIn LogIn TimeOut LogOut TimeDelta Hours 0 2018-10-28 13:44:48-04:00 clock in 2018-10-28 13:56:35-04:00 clock out 00:11:47 0.196389 1 2019-02-25 10:19:10-05:00 clock in T-1hr 2019-02-25 12:49:51-05:00 clock out T-5m 02:30:41 2.511389 0 days 02:42:28, 2.71 hours worked writing to file Pembroke-20181028-134448_to_20190225-124951.csv Visit the Tutorial for a detailed walk-through of how hourly generates timesheets. Invoicing # To generate an invoice using stripe: hourly-report invoice=stripe repo.start_date=\"Jan 1, 2020\" stripe.customer.email=myclient@momandpop.com The above command generates a time sheet for this repo, calculates earnings, prepares a stripe invoice, and asks you to confirm details. After confirmation, an email will be sent from your Stripe account to myclient@momandpop.com. The btcpay invoicing is similar: hourly-report invoice=btcpay repo.start_date=\"Jan 1, 2020\" After confirmation, hourly tells your btcpay server to generate an invoice and displays the corresponding payment url. Note that BTCPay can be configured for lightning, so streaming payments are possible! Visit the Payments section for more info. Getting Started # Hourly is hosted on github under the Apache 2.0 license https://github.com/asherp/hourly Install # pip install hourly --upgrade Requirements # pandas gitpython plotly hydra stripe (optional) btcpay-python (optional) You can get these dependencies like this: pip install pandas gitpython plotly pip install hydra-core --upgrade For invoicing: pip install btcpay-python pip install stripe For hourly's docs: pip install mkdocs mkdocs-material markdown-include mknotebooks Tests # For integration tests, hourly may be tested against the hourly repo. Unit tests are based on pytest suite with pytest-cov pip install pytest pytest-cov To run the tests, navigate to the base of this repo, then py.test tests.py --cov=hourly Configuration # Hourly uses Hydra for customized configuration. The full options are given by hourly's help command: hourly --help A simple hour tracker for git projects This application helps users clock in and out of git repos, as well as generate timesheets for invoicing. Configure hourly to ignore commits by keyword or hashes == Configuration groups == Compose your configuration from those groups (group=option) == Config == Override anything in the config (foo.bar=value) commit: clock: null identity: - name - email message: '' tminus: null compensation: [] config_override: hourly.yaml invoice: null payment: null repo: case_sensitive: false end_date: null errant_clocks: [] gitdir: . ignore: null match_logs: false start_date: null report: currency: '' filename: null pandas: display: max_columns: 10 max_colwidth: 45 max_rows: null width: 600 timesheet: true wage: null work: false vis: frequency: 1 d plotly: figure: margin: pad: 0 plot: animation_opts: null auto_open: true auto_play: true config: null filename: hourly-work.html image: null image_filename: plot_image include_mathjax: cdn include_plotlyjs: cdn link_text: Export to plot.ly output_type: file show_link: false validate: true work_log: bullet: '*' filename: WorkLog.md header_depth: 1 Powered by Hydra (https://hydra.cc) Use --hydra-help to view Hydra specific help Hourly's default configuration including comments can be seen here. config_override : hourly.yaml init : false repo : gitdir : . start_date : null end_date : null errant_clocks : [] # list of commit hashes to skip case_sensitive : False # should commit message filters be case-sensitive ignore : null # ignore work containing string, ie 'pro bono' match_logs : False # should all clock-ins be paired with clock-outs report : timesheet : false # print timesheet work : false # print work log filename : '???' # csv file to save report to pandas : display : max_rows : null max_columns : 10 max_colwidth : 45 width : 600 commit : clock : '???' # 'in' will update WorkLog.md and commit with message \"clock-in\" tminus : null # '15m' will prepend 'T-15m' to commit message (ignored if clock is null) message : '' # 'my message' will append 'my message' to commit message identity : # how to identify contributors - name - email compensation : [] # sets wages and currency per developer work_log : filename : WorkLog.md header_depth : 1 # determines markdown header size bullet : '*' vis : # set to null to prevent plotting frequency : '1 d' # start small - experienced users can override plotly : # plotly keywords figure : hovermode : 'x' margin : pad : 0 plot : show_link : False link_text : 'Export to plot.ly' validate : True output_type : file include_plotlyjs : 'cdn' filename : hourly-work.html auto_open : True image : Null image_filename : plot_image # image_width: 800 # image_height: 600 config : Null include_mathjax : 'cdn' auto_play : True animation_opts : Null handle_errors : exit # or raise verbosity : Each of these can be overridden at runtime. For example, hourly commit.clock=in vis=null report.timesheet=False This will update the WorkLog.md file and commit a clock-in message without visualizing or printing the timesheet. Note hourly-in is just syntactic sugar for hourly commit.clock=in vis=null report.timesheet=False . But if we want to override hourly's defaults without typing them in each time, we can specify an hourly.yaml file in our git repo. Hourly will look for this file (via the config_override option) and override its default configuration. Bug Your project's config_override will even override command line arguments! An example of a custom override file is found in the top-level of the hourly repo: repo : errant_clocks : - d9ec537b36475b565df6b28d0cab6edc3a89f2da ignore : 'pro bono' work_log : header_depth : 3 commit : identity : - email vis : frequency : '1 d' plotly : # plotly keywords plot : output_type : div auto_open : false filename : docs/hourly-work.html compensation : - name : Asher Pembroke email : apembroke@gmail.com wage : pi : 1.0 A common use case would be permanently overriding the filename of the work_log you are committing against, to avoid merge conflicts if multiple developers are working on the same project. Visualization # The git repo for hourly has a custom configuration that allows us to embed the work hours as a graph in the mkdocs site. If we run hourly-report from its own git repo, the graph div gets stored in docs/hourly-work.html . The graph is embedded using the markdown-include extension in mkdocs.yml . Then we add the following in our site page: {! docs/hourly-work.html !} Which embeds the graph below: if (window.MathJax) {MathJax.Hub.Config({SVG: {font: \"STIX-Web\"}});} window.PlotlyConfig = {MathJaxConfig: 'local'};","title":"Home"},{"location":"index.html#hourly","text":"Hourly is a command-line time tracking tool for git projects. Hourly parses your commit messages for clock-in and clock-out keywords to precisely estimate work hours. Designed for developers and project managers, hourly makes it easy to see how and where you spend your time. When configured with Stripe or BTCPay, hourly can generate invoices for your specified wage.","title":"Hourly"},{"location":"index.html#usage","text":"","title":"Usage"},{"location":"index.html#work-sessions","text":"To clock in: hourly-in The above command updates the header of your work log ( WorkLog.md by default) and commits it with the message \"clock-in\". Stage any changes to your code base. When you are ready to commit: hourly commit.message=\"my commit message\" Hourly updates the work log with your commit message. Feel free to use the work log to provide additional context. When you are finished committing other work for this session, you may clock out: hourly-out Again, hourly updates the work log and commits it with the message \"clock-out\" along with any other staged files. Read more about configuring your work log .","title":"Work sessions"},{"location":"index.html#timesheets","text":"When you are ready to generate a timesheet for your repo, run hourly from your git directory: hourly-report Hourly parses all the commit messages for clock in/out keywords and uses git's timestamps to determine how long each session lasted. For example, here's what happens when you run hourly on the hourly repo itself : hourly-report repo.start_date=\"2018-10-21\" repo.end_date=\"2019-3-10\" repo.ignore=\"pro bono\" pay period: 2018-10-28 13:44:48-04:00 -> 2019-02-25 12:49:51-05:00 ignoring pro bono TimeIn LogIn TimeOut LogOut TimeDelta Hours 0 2018-10-28 13:44:48-04:00 clock in 2018-10-28 13:56:35-04:00 clock out 00:11:47 0.196389 1 2019-02-25 10:19:10-05:00 clock in T-1hr 2019-02-25 12:49:51-05:00 clock out T-5m 02:30:41 2.511389 0 days 02:42:28, 2.71 hours worked To save the timesheet as a csv file, include an ouput prefix: hourly-report repo.start_date=\"2018-10-21\" repo.end_date=\"2019-3-10\" repo.ignore=\"pro bono\" report.filename=Pembroke pay period: 2018-10-28 13:44:48-04:00 -> 2019-02-25 12:49:51-05:00 ignoring pro bono TimeIn LogIn TimeOut LogOut TimeDelta Hours 0 2018-10-28 13:44:48-04:00 clock in 2018-10-28 13:56:35-04:00 clock out 00:11:47 0.196389 1 2019-02-25 10:19:10-05:00 clock in T-1hr 2019-02-25 12:49:51-05:00 clock out T-5m 02:30:41 2.511389 0 days 02:42:28, 2.71 hours worked writing to file Pembroke-20181028-134448_to_20190225-124951.csv Visit the Tutorial for a detailed walk-through of how hourly generates timesheets.","title":"Timesheets"},{"location":"index.html#invoicing","text":"To generate an invoice using stripe: hourly-report invoice=stripe repo.start_date=\"Jan 1, 2020\" stripe.customer.email=myclient@momandpop.com The above command generates a time sheet for this repo, calculates earnings, prepares a stripe invoice, and asks you to confirm details. After confirmation, an email will be sent from your Stripe account to myclient@momandpop.com. The btcpay invoicing is similar: hourly-report invoice=btcpay repo.start_date=\"Jan 1, 2020\" After confirmation, hourly tells your btcpay server to generate an invoice and displays the corresponding payment url. Note that BTCPay can be configured for lightning, so streaming payments are possible! Visit the Payments section for more info.","title":"Invoicing"},{"location":"index.html#getting-started","text":"Hourly is hosted on github under the Apache 2.0 license https://github.com/asherp/hourly","title":"Getting Started"},{"location":"index.html#install","text":"pip install hourly --upgrade","title":"Install"},{"location":"index.html#requirements","text":"pandas gitpython plotly hydra stripe (optional) btcpay-python (optional) You can get these dependencies like this: pip install pandas gitpython plotly pip install hydra-core --upgrade For invoicing: pip install btcpay-python pip install stripe For hourly's docs: pip install mkdocs mkdocs-material markdown-include mknotebooks","title":"Requirements"},{"location":"index.html#tests","text":"For integration tests, hourly may be tested against the hourly repo. Unit tests are based on pytest suite with pytest-cov pip install pytest pytest-cov To run the tests, navigate to the base of this repo, then py.test tests.py --cov=hourly","title":"Tests"},{"location":"index.html#configuration","text":"Hourly uses Hydra for customized configuration. The full options are given by hourly's help command: hourly --help A simple hour tracker for git projects This application helps users clock in and out of git repos, as well as generate timesheets for invoicing. Configure hourly to ignore commits by keyword or hashes == Configuration groups == Compose your configuration from those groups (group=option) == Config == Override anything in the config (foo.bar=value) commit: clock: null identity: - name - email message: '' tminus: null compensation: [] config_override: hourly.yaml invoice: null payment: null repo: case_sensitive: false end_date: null errant_clocks: [] gitdir: . ignore: null match_logs: false start_date: null report: currency: '' filename: null pandas: display: max_columns: 10 max_colwidth: 45 max_rows: null width: 600 timesheet: true wage: null work: false vis: frequency: 1 d plotly: figure: margin: pad: 0 plot: animation_opts: null auto_open: true auto_play: true config: null filename: hourly-work.html image: null image_filename: plot_image include_mathjax: cdn include_plotlyjs: cdn link_text: Export to plot.ly output_type: file show_link: false validate: true work_log: bullet: '*' filename: WorkLog.md header_depth: 1 Powered by Hydra (https://hydra.cc) Use --hydra-help to view Hydra specific help Hourly's default configuration including comments can be seen here. config_override : hourly.yaml init : false repo : gitdir : . start_date : null end_date : null errant_clocks : [] # list of commit hashes to skip case_sensitive : False # should commit message filters be case-sensitive ignore : null # ignore work containing string, ie 'pro bono' match_logs : False # should all clock-ins be paired with clock-outs report : timesheet : false # print timesheet work : false # print work log filename : '???' # csv file to save report to pandas : display : max_rows : null max_columns : 10 max_colwidth : 45 width : 600 commit : clock : '???' # 'in' will update WorkLog.md and commit with message \"clock-in\" tminus : null # '15m' will prepend 'T-15m' to commit message (ignored if clock is null) message : '' # 'my message' will append 'my message' to commit message identity : # how to identify contributors - name - email compensation : [] # sets wages and currency per developer work_log : filename : WorkLog.md header_depth : 1 # determines markdown header size bullet : '*' vis : # set to null to prevent plotting frequency : '1 d' # start small - experienced users can override plotly : # plotly keywords figure : hovermode : 'x' margin : pad : 0 plot : show_link : False link_text : 'Export to plot.ly' validate : True output_type : file include_plotlyjs : 'cdn' filename : hourly-work.html auto_open : True image : Null image_filename : plot_image # image_width: 800 # image_height: 600 config : Null include_mathjax : 'cdn' auto_play : True animation_opts : Null handle_errors : exit # or raise verbosity : Each of these can be overridden at runtime. For example, hourly commit.clock=in vis=null report.timesheet=False This will update the WorkLog.md file and commit a clock-in message without visualizing or printing the timesheet. Note hourly-in is just syntactic sugar for hourly commit.clock=in vis=null report.timesheet=False . But if we want to override hourly's defaults without typing them in each time, we can specify an hourly.yaml file in our git repo. Hourly will look for this file (via the config_override option) and override its default configuration. Bug Your project's config_override will even override command line arguments! An example of a custom override file is found in the top-level of the hourly repo: repo : errant_clocks : - d9ec537b36475b565df6b28d0cab6edc3a89f2da ignore : 'pro bono' work_log : header_depth : 3 commit : identity : - email vis : frequency : '1 d' plotly : # plotly keywords plot : output_type : div auto_open : false filename : docs/hourly-work.html compensation : - name : Asher Pembroke email : apembroke@gmail.com wage : pi : 1.0 A common use case would be permanently overriding the filename of the work_log you are committing against, to avoid merge conflicts if multiple developers are working on the same project.","title":"Configuration"},{"location":"index.html#visualization","text":"The git repo for hourly has a custom configuration that allows us to embed the work hours as a graph in the mkdocs site. If we run hourly-report from its own git repo, the graph div gets stored in docs/hourly-work.html . The graph is embedded using the markdown-include extension in mkdocs.yml . Then we add the following in our site page: {! docs/hourly-work.html !} Which embeds the graph below: if (window.MathJax) {MathJax.Hub.Config({SVG: {font: \"STIX-Web\"}});} window.PlotlyConfig = {MathJaxConfig: 'local'};","title":"Visualization"},{"location":"Compensation.html","text":"Compensation # Hourly can be configured to assign developers' compensation on an indvidual basis: compensation : - name : Satoshi Nakamoto email : satoshi@vistomail.com wage : 75 currency : BTC pubkey : <pubkey> Note Hourly does not yet support public key signatures, but developers could include a signature in invoice.itemDesc This has some interesting consequences, depending on who authors the configuration! Market signaling through compensation # compensation details can be made public by committing hourly.yaml to the master branch of your git repo. This implies that the listed developers may issue invoices for that repo and might be compensated according to the specified wage. So, if a developer is in high demand, there could be a bidding war between projects to attract that developer's attention. Conversely, setting your own compensation is an indication of the rates you're offering (and in what currencies). This represents the supply side of a fully decentralized labor market, where \"order matching\" could be done through email! Market signaling through time # Suppose there is no compensation set in the project's hourly.yaml (or you are not a listed developer). There is still a benefit to using hourly: your contributions to open source projects can be measured in hours , thereby demonstrating the value of your time. Note Developers could still issue invoices for any amount, but there is no expectation that maintainers would pay (at least not publicly).","title":"Compensation"},{"location":"Compensation.html#compensation","text":"Hourly can be configured to assign developers' compensation on an indvidual basis: compensation : - name : Satoshi Nakamoto email : satoshi@vistomail.com wage : 75 currency : BTC pubkey : <pubkey> Note Hourly does not yet support public key signatures, but developers could include a signature in invoice.itemDesc This has some interesting consequences, depending on who authors the configuration!","title":"Compensation"},{"location":"Compensation.html#market-signaling-through-compensation","text":"compensation details can be made public by committing hourly.yaml to the master branch of your git repo. This implies that the listed developers may issue invoices for that repo and might be compensated according to the specified wage. So, if a developer is in high demand, there could be a bidding war between projects to attract that developer's attention. Conversely, setting your own compensation is an indication of the rates you're offering (and in what currencies). This represents the supply side of a fully decentralized labor market, where \"order matching\" could be done through email!","title":"Market signaling through compensation"},{"location":"Compensation.html#market-signaling-through-time","text":"Suppose there is no compensation set in the project's hourly.yaml (or you are not a listed developer). There is still a benefit to using hourly: your contributions to open source projects can be measured in hours , thereby demonstrating the value of your time. Note Developers could still issue invoices for any amount, but there is no expectation that maintainers would pay (at least not publicly).","title":"Market signaling through time"},{"location":"FAQ.html","text":"Frequently Asked Questions # Why do I need hourly to clock-in/out instead of git commit -m 'clock-in'? # That's actually how work on hourly began - I started adding clock-in/out to my git messages and figured I would eventually generate timesheets based on that. However, doing it manually is a hastle and mistakes will be made! When you use hourly-in , hourly first checks that you are not already clocked in (by checking the current git users's commit history). If you are already clocked in, hourly will tell you when you last clocked in and exit before a problematic commit is generated. This works similarly when you clock out. What happens if I forgot to clock-in/out for the day? # Everyone makes mistakes. If you forgot to clock out 12 hours and 30 minutes ago, then just clock out now: hourly-out commit.tminus=12h30m . This will generate the following commit message: clock-out: T-12h30m Later on, when hourly generates a timesheet, it will automatically adjust the clock-out time to be 12.5 hours into the past. Why can't I clock-in/out sometime in the future? # While it's easy to forget to do something, it's hard to predict when something will happen. I couldn't think of a reason to support such a feature, so I haven't. Can't I just pretend to have worked when I really did nothing? # Hourly assumes honesty, so it doesn't know if you're being productive. However, hourly also makes it easy to see what code you committed while you were clocked in. Even if you don't commit code, it's a good idea to update the work log with details on how you spend your time. With hourly, honesty is the best policy. My organization won't let me install any crypto-related software. Can I still use hourly? # Yes! btcpay-python is the only crypto-related package, and it's only imported when you issue a BTCPay invoice. How does Hourly handle branching? Will Hourly mess with my git-flow? # By default, Hourly's operations are only applied to branch you have checked out. However, we plan to support multi-branch and multi-repo operations!","title":"FAQ"},{"location":"FAQ.html#frequently-asked-questions","text":"","title":"Frequently Asked Questions"},{"location":"FAQ.html#why-do-i-need-hourly-to-clock-inout-instead-of-git-commit-m-clock-in","text":"That's actually how work on hourly began - I started adding clock-in/out to my git messages and figured I would eventually generate timesheets based on that. However, doing it manually is a hastle and mistakes will be made! When you use hourly-in , hourly first checks that you are not already clocked in (by checking the current git users's commit history). If you are already clocked in, hourly will tell you when you last clocked in and exit before a problematic commit is generated. This works similarly when you clock out.","title":"Why do I need hourly to clock-in/out instead of git commit -m 'clock-in'?"},{"location":"FAQ.html#what-happens-if-i-forgot-to-clock-inout-for-the-day","text":"Everyone makes mistakes. If you forgot to clock out 12 hours and 30 minutes ago, then just clock out now: hourly-out commit.tminus=12h30m . This will generate the following commit message: clock-out: T-12h30m Later on, when hourly generates a timesheet, it will automatically adjust the clock-out time to be 12.5 hours into the past.","title":"What happens if I forgot to clock-in/out for the day?"},{"location":"FAQ.html#why-cant-i-clock-inout-sometime-in-the-future","text":"While it's easy to forget to do something, it's hard to predict when something will happen. I couldn't think of a reason to support such a feature, so I haven't.","title":"Why can't I clock-in/out sometime in the future?"},{"location":"FAQ.html#cant-i-just-pretend-to-have-worked-when-i-really-did-nothing","text":"Hourly assumes honesty, so it doesn't know if you're being productive. However, hourly also makes it easy to see what code you committed while you were clocked in. Even if you don't commit code, it's a good idea to update the work log with details on how you spend your time. With hourly, honesty is the best policy.","title":"Can't I just pretend to have worked when I really did nothing?"},{"location":"FAQ.html#my-organization-wont-let-me-install-any-crypto-related-software-can-i-still-use-hourly","text":"Yes! btcpay-python is the only crypto-related package, and it's only imported when you issue a BTCPay invoice.","title":"My organization won't let me install any crypto-related software. Can I still use hourly?"},{"location":"FAQ.html#how-does-hourly-handle-branching-will-hourly-mess-with-my-git-flow","text":"By default, Hourly's operations are only applied to branch you have checked out. However, we plan to support multi-branch and multi-repo operations!","title":"How does Hourly handle branching? Will Hourly mess with my git-flow?"},{"location":"Payments.html","text":"Payments # With hourly, issuing invoices is a breeze. To issue a stripe invoice: hourly-report invoice=stripe stripe.customer.email=myclient@momandpop.com See the Instructions for configuring hourly for Stripe . To issue a BTCPay invoice connected to your BTCPay Server: hourly-report invoice=btcpay See the Instructions for configuring hourly with a BTCPay server . Currently, only BTCPay and Stripe are supported. If you are interested in adding support for other invoicing platforms, issue a pull request. If you want to sponsor development for an hourly feature, contact Asher . Stripe # Stripe is a popular global payment processing platform for credit cards. They have an invoice API that allows hourly to issue invoices on your behalf in a single command: hourly-report invoice=stripe stripe.customer.email=my.client@momandpop.com Stripe Setup # Step 1 - install the stripe python api: # pip install --upgrade stripe Step 2 - Create a stripe account # You will need an account at Stripe . Be sure to follow the steps for a developer looking to handle one-time payments. You should also set up your invoice template settings . Step 3 - Set environment variables # From the Stripe dashboard : copy the Secret key and set it as an environment variable STRIPE_API_SECRET_KEY You can also paste in the Secret key later as a command-line argument argument to hourly: stripe.secret_key=<your stripe secret key> Warning You will probably want to use your test_ API keys first! Hourly Configuration # Hourly provides the following default configuration for stripe invoices: invoice : # see https://stripe.com/docs/billing/invoices/create-invoice#python stripe : secret_key : ${env:STRIPE_API_SECRET_KEY} customer : name : null email : null description : null customer_id : null # skips customer creation if set invoice_item : customer : # overridden by customer_id amount : # overrides earnings currency : # overrides compensation currency description : # overrides <hours worked> from repo.start_date to repo.end_date invoice : customer : # overridden by customer_id collection_method : send_invoice days_until_due : 30 auto_advance : True # auto-finalize this draft after ~1 hour. footer : Time sheet generated by hourly send_invoice : true # sends invoice to customer.email immediately return_status : false logging : 40 # https://docs.python.org/3/library/logging.html#logging-level The following fields are subsets of stripe's own API, which has additional fields you can use: invoice_item customer invoice Any of the defaults can be overridden, either at command line or by your project's configuration override . However, stripe.customer.email is a required field. Generating Stripe invoices # To generate a stripe invoice for your repo, you will need to specify an email address. Hourly will prepare an invoice and ask for confirmation. Here is an example of what that looks like when I run hourly on the hourly repo: hourly-report invoice=stripe repo.start_date=\"Jan 1, 2020\" stripe.customer.email=apembroke+hourly@gmail.com\" 1 days 04:02:14, 28.04 hours worked 2803.72 USD Generating stripe invoice for Asher Pembroke creating new customer new customer_id: cus_GVy3BWS792lu4D customer: description: null email: apembroke+hourly@gmail.com name: null customer_id: cus_GVy3BWS792lu4D invoice: auto_advance: false collection_method: send_invoice customer: cus_GVy3BWS792lu4D days_until_due: 30 footer: Time sheet generated by hourly invoice_item: amount: 280373 currency: usd customer: cus_GVy3BWS792lu4D description: 28.04 hours worked from 2020-01-03T18:44:04-05:00 to 2020-01-09T02:04:18-05:00 logging: 40 return_status: false secret_key: ${env:STRIPE_API_SECRET_KEY} send_invoice: true Is this correct? (yes/n): yes Success! Invoice will be sent to apembroke+hourly@gmail.com Invoice may be paid at https://pay.stripe.com/invoice/<---- redacted -----> View your invoice at https://dashboard.stripe.com Note I have redacted actual payment URL The recipient should get an email from stripe to pay by credit card. You can test credit card payment using one of their testing cards . Meanwhile, visiting the url should show you a page like this: BTCPay # Background # BTCPay is a decentralized payment processing platform for accepting cryptocurrency. With BTCpay integration, you can issue invoices and receive crypto payments with maximum privacy and minimal cost. You can use a third-party provider or host it yourself - the only difference will be the domain name used to create the local client. Setup # First you will need to register and create a store on a BTCPay server . There are a few free ones listed on btcpayserver.org , but please use caution when choosing a free service, as there are privacy trade-offs to consider. For maximum privacy and security, host one yourself. Once you've chosen a server, connect a bitcoin wallet to your new store. This can be done in your store's general settings, under Derivation Scheme , where you provide your wallet's xpubkey - BTCPay Server uses this key to generate a unique payment address for every invoice issued. Warning A legitimate BTCPay Server should only ask for your wallet's xpubkey and NEVER YOUR PRIVATE KEY Info BTCPay also supports Lightning invoices, which allows for instant settlement. This involves some tradeoffs in security and availability. Then you will need to install the btcpay-python client pip install btcpay-python Pairing with BTCPay server # Follow these pairing instructions from the kind BTCPay developers. Note These instructions correspond to \"The manual way\" - we want to be able to create a btcpay client on-demand without storing it in a database. I'm essentially repeating their instructions below: Step 1 - Get a pairing code # On your BTCPay server, browse to Stores > Store settings > Access tokens > Create new token Fill in the form: Label: Public key: leave blank Click save and then copy the 7 digit pairing_code from the success page Step 2 - Generate a private key # This can be done with the following code: from btcpay import crypto privkey = crypto . generate_privkey () with open ( 'btcpayserver.pem' , 'w' ) as pem : pem . write ( privkey ) Here we store the private key in a PEM file. By default, hourly will look for btcpayserver.pem in the top level of your git repo, but you can use a different name. Warning Do not add the pem file to your git repo! List it in your .gitignore so you don't do so by accident. Step 3 - Create a client # Create a client using host url of your btcpayserver (e.g. https://btc.exitpay.org) and private key: client = BTCPayClient ( host = host_url , pem = privkey ) Store your server's host url in the environment variable BTCPAYSERVER_HOST . Step 4 - Generate a pairing token # using the pairing code from Step 1 token = client . pair_client ( pairing_code ) merchant_token = token [ 'merchant' ] Save the merchant_token as an environment variable BTCPAYSERVER_MERCHANT Step 5 - Recreate the client # Whenever you like: client = BTCPayClient ( host = host_store , pem = privkey , tokens = token , ) Step 6 - Generate a test invoice # Assuming you have completed the steps to connect a wallet to your btcpayserver, you should be able to run the following code to generate an invoice. new_invoice = client . create_invoice ({ \"price\" : 20 , \"currency\" : \"USD\" }) print ( new_invoice [ 'url' ]) This should give you a payment url you can email to your client/employer. Depending on how you set up your BTCPay Server, the invoice will only be valid for a short period of time (default is 15 minutes). There is a trade-off here: a short time period mitigates the risk of currency fluctuation, but requires that the client/employer must act quickly to pay the invoice. Hourly configuration # Hourly creates a BTCPayClient through the following configuration: # for invoice spec, see https://bitpay.com/api/#rest-api-resources-invoices invoice : btcpay : host : ${env:BTCPAYSERVER_HOST} tokens : merchant : ${env:BTCPAYSERVER_MERCHANT} pem : btcpayserver.pem # file holding btcpayserver private key return_status : false invoice : currency : null # will be honored if set price : null # will be honored if set, else determined by wage orderId : null fullNotifications : True extendedNotifications : True transactionSpeed : medium notificationURL : null # https://mywebhook.com notificationEmail : null # myemail@email.com redirectURL : null # https://yourredirecturl.com buyer : email : null # fox.mulder@trustno.one name : null # Fox Mulder phone : null # 555-123-456 address1 : null # 2630 Hegal Place address2 : null # Apt 42 locality : null # Alexandria region : # VA postalCode : # 23242 country : # US notify : True itemDesc : null # will be honored if set, else hourly will provide This allows hourly to access your environment variables and the pem file you created above. Any of these parameters can be overridden when you run hourly. Here are some examples. hourly-report invoice=btcpay btcpay.pem=<private key> hourly-report invoice=btcpay btcpay.pem=/path/to/other/btcpayserver.pem hourly-report invoice=btcpay btcpay.host=https://myprivateserver.com Hourly Invoicing # If you configured hourly with BTCPay, you can generate an invoice for your git repo in a given date range. Here is what that looks like when applied to the hourly repo: hourly-report invoice=btcpay payment=btcpay repo.start_date=\"Jan 1, 2020\" repo.end_date=\"Jan 6, 2020\" Processing timesheet for Asher Pembroke pay period: 2020-01-03 18:44:04-05:00 -> 2020-01-05 18:34:41-05:00 ignoring pro bono TimeIn LogIn email TimeOut LogOut email TimeDelta Hours 0 2020-01-03 18:44:04-05:00 clock-in apembroke@gmail.com 2020-01-03 20:31:57-05:00 clock-out apembroke@gmail.com 01:47:53 1.798056 1 2020-01-03 20:45:54-05:00 clock-in apembroke@gmail.com 2020-01-03 22:40:56-05:00 clock-out apembroke@gmail.com 01:55:02 1.917222 2 2020-01-04 13:16:11-05:00 clock-in apembroke@gmail.com 2020-01-04 14:01:43-05:00 clock-out apembroke@gmail.com 00:45:32 0.758889 3 2020-01-04 14:55:18-05:00 clock-in apembroke@gmail.com 2020-01-04 16:35:04-05:00 clock-out apembroke@gmail.com 01:39:46 1.662778 4 2020-01-04 19:56:53-05:00 clock-in apembroke@gmail.com 2020-01-04 21:06:20-05:00 clock-out apembroke@gmail.com 01:09:27 1.157500 5 2020-01-04 23:59:21-05:00 clock-in apembroke@gmail.com 2020-01-05 03:59:59-05:00 clock-out apembroke@gmail.com 04:00:38 4.010556 6 2020-01-05 16:32:33-05:00 clock-in apembroke@gmail.com 2020-01-05 17:03:22-05:00 clock-out apembroke@gmail.com 00:30:49 0.513611 7 2020-01-05 17:29:01-05:00 clock-in apembroke@gmail.com 2020-01-05 18:34:41-05:00 clock-out apembroke@gmail.com 01:05:40 1.094444 0 days 12:54:47, 12.91 hours worked 1291.31 USD generating invoice for current user Asher Pembroke buyer: address1: null address2: null country: null email: null locality: null name: null notify: true phone: null postalCode: null region: null currency: USD extendedNotifications: true fullNotifications: true itemDesc: 12.91 hours worked from 2020-01-03T18:44:04-05:00 to 2020-01-05T18:34:41-05:00 notificationEmail: null notificationURL: null orderId: null price: 1291.3055555555554 redirectURL: null transactionSpeed: medium Is this correct? (yes/n)yes Success! Your invoice may be paid here: https://btc.exitpay.org/invoice?id=MoSbFujB7AwcrvfMN21gGC Navigate to the payment url provided:","title":"Invoicing"},{"location":"Payments.html#payments","text":"With hourly, issuing invoices is a breeze. To issue a stripe invoice: hourly-report invoice=stripe stripe.customer.email=myclient@momandpop.com See the Instructions for configuring hourly for Stripe . To issue a BTCPay invoice connected to your BTCPay Server: hourly-report invoice=btcpay See the Instructions for configuring hourly with a BTCPay server . Currently, only BTCPay and Stripe are supported. If you are interested in adding support for other invoicing platforms, issue a pull request. If you want to sponsor development for an hourly feature, contact Asher .","title":"Payments"},{"location":"Payments.html#stripe","text":"Stripe is a popular global payment processing platform for credit cards. They have an invoice API that allows hourly to issue invoices on your behalf in a single command: hourly-report invoice=stripe stripe.customer.email=my.client@momandpop.com","title":"Stripe"},{"location":"Payments.html#stripe-setup","text":"","title":"Stripe Setup"},{"location":"Payments.html#step-1-install-the-stripe-python-api","text":"pip install --upgrade stripe","title":"Step 1 - install the stripe python api:"},{"location":"Payments.html#step-2-create-a-stripe-account","text":"You will need an account at Stripe . Be sure to follow the steps for a developer looking to handle one-time payments. You should also set up your invoice template settings .","title":"Step 2 - Create a stripe account"},{"location":"Payments.html#step-3-set-environment-variables","text":"From the Stripe dashboard : copy the Secret key and set it as an environment variable STRIPE_API_SECRET_KEY You can also paste in the Secret key later as a command-line argument argument to hourly: stripe.secret_key=<your stripe secret key> Warning You will probably want to use your test_ API keys first!","title":"Step 3 - Set environment variables"},{"location":"Payments.html#hourly-configuration","text":"Hourly provides the following default configuration for stripe invoices: invoice : # see https://stripe.com/docs/billing/invoices/create-invoice#python stripe : secret_key : ${env:STRIPE_API_SECRET_KEY} customer : name : null email : null description : null customer_id : null # skips customer creation if set invoice_item : customer : # overridden by customer_id amount : # overrides earnings currency : # overrides compensation currency description : # overrides <hours worked> from repo.start_date to repo.end_date invoice : customer : # overridden by customer_id collection_method : send_invoice days_until_due : 30 auto_advance : True # auto-finalize this draft after ~1 hour. footer : Time sheet generated by hourly send_invoice : true # sends invoice to customer.email immediately return_status : false logging : 40 # https://docs.python.org/3/library/logging.html#logging-level The following fields are subsets of stripe's own API, which has additional fields you can use: invoice_item customer invoice Any of the defaults can be overridden, either at command line or by your project's configuration override . However, stripe.customer.email is a required field.","title":"Hourly Configuration"},{"location":"Payments.html#generating-stripe-invoices","text":"To generate a stripe invoice for your repo, you will need to specify an email address. Hourly will prepare an invoice and ask for confirmation. Here is an example of what that looks like when I run hourly on the hourly repo: hourly-report invoice=stripe repo.start_date=\"Jan 1, 2020\" stripe.customer.email=apembroke+hourly@gmail.com\" 1 days 04:02:14, 28.04 hours worked 2803.72 USD Generating stripe invoice for Asher Pembroke creating new customer new customer_id: cus_GVy3BWS792lu4D customer: description: null email: apembroke+hourly@gmail.com name: null customer_id: cus_GVy3BWS792lu4D invoice: auto_advance: false collection_method: send_invoice customer: cus_GVy3BWS792lu4D days_until_due: 30 footer: Time sheet generated by hourly invoice_item: amount: 280373 currency: usd customer: cus_GVy3BWS792lu4D description: 28.04 hours worked from 2020-01-03T18:44:04-05:00 to 2020-01-09T02:04:18-05:00 logging: 40 return_status: false secret_key: ${env:STRIPE_API_SECRET_KEY} send_invoice: true Is this correct? (yes/n): yes Success! Invoice will be sent to apembroke+hourly@gmail.com Invoice may be paid at https://pay.stripe.com/invoice/<---- redacted -----> View your invoice at https://dashboard.stripe.com Note I have redacted actual payment URL The recipient should get an email from stripe to pay by credit card. You can test credit card payment using one of their testing cards . Meanwhile, visiting the url should show you a page like this:","title":"Generating Stripe invoices"},{"location":"Payments.html#btcpay","text":"","title":"BTCPay"},{"location":"Payments.html#background","text":"BTCPay is a decentralized payment processing platform for accepting cryptocurrency. With BTCpay integration, you can issue invoices and receive crypto payments with maximum privacy and minimal cost. You can use a third-party provider or host it yourself - the only difference will be the domain name used to create the local client.","title":"Background"},{"location":"Payments.html#setup","text":"First you will need to register and create a store on a BTCPay server . There are a few free ones listed on btcpayserver.org , but please use caution when choosing a free service, as there are privacy trade-offs to consider. For maximum privacy and security, host one yourself. Once you've chosen a server, connect a bitcoin wallet to your new store. This can be done in your store's general settings, under Derivation Scheme , where you provide your wallet's xpubkey - BTCPay Server uses this key to generate a unique payment address for every invoice issued. Warning A legitimate BTCPay Server should only ask for your wallet's xpubkey and NEVER YOUR PRIVATE KEY Info BTCPay also supports Lightning invoices, which allows for instant settlement. This involves some tradeoffs in security and availability. Then you will need to install the btcpay-python client pip install btcpay-python","title":"Setup"},{"location":"Payments.html#pairing-with-btcpay-server","text":"Follow these pairing instructions from the kind BTCPay developers. Note These instructions correspond to \"The manual way\" - we want to be able to create a btcpay client on-demand without storing it in a database. I'm essentially repeating their instructions below:","title":"Pairing with BTCPay server"},{"location":"Payments.html#step-1-get-a-pairing-code","text":"On your BTCPay server, browse to Stores > Store settings > Access tokens > Create new token Fill in the form: Label: Public key: leave blank Click save and then copy the 7 digit pairing_code from the success page","title":"Step 1 - Get a pairing code"},{"location":"Payments.html#step-2-generate-a-private-key","text":"This can be done with the following code: from btcpay import crypto privkey = crypto . generate_privkey () with open ( 'btcpayserver.pem' , 'w' ) as pem : pem . write ( privkey ) Here we store the private key in a PEM file. By default, hourly will look for btcpayserver.pem in the top level of your git repo, but you can use a different name. Warning Do not add the pem file to your git repo! List it in your .gitignore so you don't do so by accident.","title":"Step 2 - Generate a private key"},{"location":"Payments.html#step-3-create-a-client","text":"Create a client using host url of your btcpayserver (e.g. https://btc.exitpay.org) and private key: client = BTCPayClient ( host = host_url , pem = privkey ) Store your server's host url in the environment variable BTCPAYSERVER_HOST .","title":"Step 3 - Create a client"},{"location":"Payments.html#step-4-generate-a-pairing-token","text":"using the pairing code from Step 1 token = client . pair_client ( pairing_code ) merchant_token = token [ 'merchant' ] Save the merchant_token as an environment variable BTCPAYSERVER_MERCHANT","title":"Step 4 - Generate a pairing token"},{"location":"Payments.html#step-5-recreate-the-client","text":"Whenever you like: client = BTCPayClient ( host = host_store , pem = privkey , tokens = token , )","title":"Step 5 - Recreate the client"},{"location":"Payments.html#step-6-generate-a-test-invoice","text":"Assuming you have completed the steps to connect a wallet to your btcpayserver, you should be able to run the following code to generate an invoice. new_invoice = client . create_invoice ({ \"price\" : 20 , \"currency\" : \"USD\" }) print ( new_invoice [ 'url' ]) This should give you a payment url you can email to your client/employer. Depending on how you set up your BTCPay Server, the invoice will only be valid for a short period of time (default is 15 minutes). There is a trade-off here: a short time period mitigates the risk of currency fluctuation, but requires that the client/employer must act quickly to pay the invoice.","title":"Step 6 - Generate a test invoice"},{"location":"Payments.html#hourly-configuration_1","text":"Hourly creates a BTCPayClient through the following configuration: # for invoice spec, see https://bitpay.com/api/#rest-api-resources-invoices invoice : btcpay : host : ${env:BTCPAYSERVER_HOST} tokens : merchant : ${env:BTCPAYSERVER_MERCHANT} pem : btcpayserver.pem # file holding btcpayserver private key return_status : false invoice : currency : null # will be honored if set price : null # will be honored if set, else determined by wage orderId : null fullNotifications : True extendedNotifications : True transactionSpeed : medium notificationURL : null # https://mywebhook.com notificationEmail : null # myemail@email.com redirectURL : null # https://yourredirecturl.com buyer : email : null # fox.mulder@trustno.one name : null # Fox Mulder phone : null # 555-123-456 address1 : null # 2630 Hegal Place address2 : null # Apt 42 locality : null # Alexandria region : # VA postalCode : # 23242 country : # US notify : True itemDesc : null # will be honored if set, else hourly will provide This allows hourly to access your environment variables and the pem file you created above. Any of these parameters can be overridden when you run hourly. Here are some examples. hourly-report invoice=btcpay btcpay.pem=<private key> hourly-report invoice=btcpay btcpay.pem=/path/to/other/btcpayserver.pem hourly-report invoice=btcpay btcpay.host=https://myprivateserver.com","title":"Hourly configuration"},{"location":"Payments.html#hourly-invoicing","text":"If you configured hourly with BTCPay, you can generate an invoice for your git repo in a given date range. Here is what that looks like when applied to the hourly repo: hourly-report invoice=btcpay payment=btcpay repo.start_date=\"Jan 1, 2020\" repo.end_date=\"Jan 6, 2020\" Processing timesheet for Asher Pembroke pay period: 2020-01-03 18:44:04-05:00 -> 2020-01-05 18:34:41-05:00 ignoring pro bono TimeIn LogIn email TimeOut LogOut email TimeDelta Hours 0 2020-01-03 18:44:04-05:00 clock-in apembroke@gmail.com 2020-01-03 20:31:57-05:00 clock-out apembroke@gmail.com 01:47:53 1.798056 1 2020-01-03 20:45:54-05:00 clock-in apembroke@gmail.com 2020-01-03 22:40:56-05:00 clock-out apembroke@gmail.com 01:55:02 1.917222 2 2020-01-04 13:16:11-05:00 clock-in apembroke@gmail.com 2020-01-04 14:01:43-05:00 clock-out apembroke@gmail.com 00:45:32 0.758889 3 2020-01-04 14:55:18-05:00 clock-in apembroke@gmail.com 2020-01-04 16:35:04-05:00 clock-out apembroke@gmail.com 01:39:46 1.662778 4 2020-01-04 19:56:53-05:00 clock-in apembroke@gmail.com 2020-01-04 21:06:20-05:00 clock-out apembroke@gmail.com 01:09:27 1.157500 5 2020-01-04 23:59:21-05:00 clock-in apembroke@gmail.com 2020-01-05 03:59:59-05:00 clock-out apembroke@gmail.com 04:00:38 4.010556 6 2020-01-05 16:32:33-05:00 clock-in apembroke@gmail.com 2020-01-05 17:03:22-05:00 clock-out apembroke@gmail.com 00:30:49 0.513611 7 2020-01-05 17:29:01-05:00 clock-in apembroke@gmail.com 2020-01-05 18:34:41-05:00 clock-out apembroke@gmail.com 01:05:40 1.094444 0 days 12:54:47, 12.91 hours worked 1291.31 USD generating invoice for current user Asher Pembroke buyer: address1: null address2: null country: null email: null locality: null name: null notify: true phone: null postalCode: null region: null currency: USD extendedNotifications: true fullNotifications: true itemDesc: 12.91 hours worked from 2020-01-03T18:44:04-05:00 to 2020-01-05T18:34:41-05:00 notificationEmail: null notificationURL: null orderId: null price: 1291.3055555555554 redirectURL: null transactionSpeed: medium Is this correct? (yes/n)yes Success! Your invoice may be paid here: https://btc.exitpay.org/invoice?id=MoSbFujB7AwcrvfMN21gGC Navigate to the payment url provided:","title":"Hourly Invoicing"},{"location":"WorkLog.html","text":"WorkLog.md # The hourly command line utility will update the top-level WorkLog.md file when you clock in/out of a project, inserting a clock in/out header with the current time stamp at the top of the file. This file may be edited to add details about the current work session. The WorkLog.md file serves a dual purpose: It provides a human-readable account of work session details It ensures there is always a file to commit against This way work sessions can be documented even if there are no committed code changes. Collaborative Development # While simple and convenient for solo projects, there may be merge conflicts if multiple people are updating the same WorkLog. There are at least two ways to work around this: Use the work_log.filename option to specify an alternate log file (e.g. MyWorkLog.md ) in which to store your session details. Delete your WorkLog.md before merging. Hourly can still generate a timesheet even if the WorkLog.md is missing. Note Git keeps the history of your branch's WorkLog after deletion. Recover with git log --all --full-history -- \"**/WorkLog.*\" MkDocs # Currently, the WorkLog is assumed to be in the top level directory of the git project. In order to include work commits in your site's documentation, create a docs/WorkLog.md file containing the following line: {! WorkLog.md !} Then update mkdocs.yaml : nav : - WorkLog.md : WorkLog.md markdown_extensions : - markdown_include.include For example, we can use this method to insert this site's work session details below. Hourly's WorkLog # if (window.MathJax) {MathJax.Hub.Config({SVG: {font: \"STIX-Web\"}});} window.PlotlyConfig = {MathJaxConfig: 'local'};","title":"WorkLog"},{"location":"WorkLog.html#worklogmd","text":"The hourly command line utility will update the top-level WorkLog.md file when you clock in/out of a project, inserting a clock in/out header with the current time stamp at the top of the file. This file may be edited to add details about the current work session. The WorkLog.md file serves a dual purpose: It provides a human-readable account of work session details It ensures there is always a file to commit against This way work sessions can be documented even if there are no committed code changes.","title":"WorkLog.md"},{"location":"WorkLog.html#collaborative-development","text":"While simple and convenient for solo projects, there may be merge conflicts if multiple people are updating the same WorkLog. There are at least two ways to work around this: Use the work_log.filename option to specify an alternate log file (e.g. MyWorkLog.md ) in which to store your session details. Delete your WorkLog.md before merging. Hourly can still generate a timesheet even if the WorkLog.md is missing. Note Git keeps the history of your branch's WorkLog after deletion. Recover with git log --all --full-history -- \"**/WorkLog.*\"","title":"Collaborative Development"},{"location":"WorkLog.html#mkdocs","text":"Currently, the WorkLog is assumed to be in the top level directory of the git project. In order to include work commits in your site's documentation, create a docs/WorkLog.md file containing the following line: {! WorkLog.md !} Then update mkdocs.yaml : nav : - WorkLog.md : WorkLog.md markdown_extensions : - markdown_include.include For example, we can use this method to insert this site's work session details below.","title":"MkDocs"},{"location":"WorkLog.html#hourlys-worklog","text":"if (window.MathJax) {MathJax.Hub.Config({SVG: {font: \"STIX-Web\"}});} window.PlotlyConfig = {MathJaxConfig: 'local'};","title":"Hourly's WorkLog"},{"location":"about.html","text":"Who are you? # I'm Asher, a data scientist from NASA. I've been a full time freelancer since Feb. 2019. Why have you done this? # I created hourly because I needed a free hour tracking tool that would be easy to use and not get in the way of my add/commit/push workflow. Hourly differs from many other tools in the following ways: it's super simple - you commit with a clock-in/out message it doesn't require a database that needs to be managed separately it doesn't spy on you you can be as transparent as you want to be: If you want people to know you're on the clock, just push your clock-in message. Conversely, if you don't want to be bothered, push a clock-out message. These features should make Hourly ideal for freelancers and remote workers. If you need help integrating hourly into your business/workflow, feel free to reach out !","title":"Author's notes"},{"location":"about.html#who-are-you","text":"I'm Asher, a data scientist from NASA. I've been a full time freelancer since Feb. 2019.","title":"Who are you?"},{"location":"about.html#why-have-you-done-this","text":"I created hourly because I needed a free hour tracking tool that would be easy to use and not get in the way of my add/commit/push workflow. Hourly differs from many other tools in the following ways: it's super simple - you commit with a clock-in/out message it doesn't require a database that needs to be managed separately it doesn't spy on you you can be as transparent as you want to be: If you want people to know you're on the clock, just push your clock-in message. Conversely, if you don't want to be bothered, push a clock-out message. These features should make Hourly ideal for freelancers and remote workers. If you need help integrating hourly into your business/workflow, feel free to reach out !","title":"Why have you done this?"},{"location":"btcpayserver.html","text":"BTCPay # Background # BTCPay is a decentralized payment processing platform for accepting cryptocurrency. With BTCpay integration, you can issue invoices and receive crypto payments with maximum privacy and minimal cost. You can use a third-party provider or host it yourself - the only difference will be the domain name used to create the local client. Setup # First you will need to register and create a store on a BTCPay server . There are a few free ones listed on btcpayserver.org , but please use caution when choosing a free service, as there are privacy trade-offs to consider. For maximum privacy and security, host one yourself. Once you've chosen a server, connect a bitcoin wallet to your new store. This can be done in your store's general settings, under Derivation Scheme , where you provide your wallet's xpubkey - BTCPay Server uses this key to generate a unique payment address for every invoice issued. Warning A legitimate BTCPay Server should only ask for your wallet's xpubkey and NEVER YOUR PRIVATE KEY Info BTCPay also supports Lightning invoices, which allows for instant settlement. This involves some tradeoffs in security and availability. Then you will need to install the btcpay-python client pip install btcpay-python Pairing with BTCPay server # Follow these pairing instructions from the kind BTCPay developers. Note These instructions correspond to \"The manual way\" - we want to be able to create a btcpay client on-demand without storing it in a database. I'm essentially repeating their instructions below: Step 1 - Get a pairing code # On your BTCPay server, browse to Stores > Store settings > Access tokens > Create new token Fill in the form: Label: Public key: leave blank Click save and then copy the 7 digit pairing_code from the success page Step 2 - Generate a private key # This can be done with the following code: from btcpay import crypto privkey = crypto . generate_privkey () with open ( 'btcpayserver.pem' , 'w' ) as pem : pem . write ( privkey ) Here we store the private key in a PEM file. By default, hourly will look for btcpayserver.pem in the top level of your git repo, but you can use a different name. Warning Do not add the pem file to your git repo! List it in your .gitignore so you don't do so by accident. Step 3 - Create a client # Create a client using host url of your btcpayserver (e.g. https://btc.exitpay.org) and private key: client = BTCPayClient ( host = host_url , pem = privkey ) Store your server's host url in the environment variable BTCPAYSERVER_HOST . Step 4 - Generate a pairing token # using the pairing code from Step 1 token = client . pair_client ( pairing_code ) merchant_token = token [ 'merchant' ] Save the merchant_token as an environment variable BTCPAYSERVER_MERCHANT Step 5 - Recreate the client # Whenever you like: client = BTCPayClient ( host = host_store , pem = privkey , tokens = token , ) Step 6 - Generate a test invoice # Assuming you have completed the steps to connect a wallet to your btcpayserver, you should be able to run the following code to generate an invoice. new_invoice = client . create_invoice ({ \"price\" : 20 , \"currency\" : \"USD\" }) print ( new_invoice [ 'url' ]) This should give you a payment url you can email to your client/employer. Depending on how you set up your BTCPay Server, the invoice will only be valid for a short period of time (default is 15 minutes). There is a trade-off here: a short time period mitigates the risk of currency fluctuation, but requires that the client/employer must act quickly to pay the invoice. Hourly configuration # Hourly creates a BTCPayClient through the following configuration: # for invoice spec, see https://bitpay.com/api/#rest-api-resources-invoices invoice : btcpay : host : ${env:BTCPAYSERVER_HOST} tokens : merchant : ${env:BTCPAYSERVER_MERCHANT} pem : btcpayserver.pem # file holding btcpayserver private key return_status : false invoice : currency : null # will be honored if set price : null # will be honored if set, else determined by wage orderId : null fullNotifications : True extendedNotifications : True transactionSpeed : medium notificationURL : null # https://mywebhook.com notificationEmail : null # myemail@email.com redirectURL : null # https://yourredirecturl.com buyer : email : null # fox.mulder@trustno.one name : null # Fox Mulder phone : null # 555-123-456 address1 : null # 2630 Hegal Place address2 : null # Apt 42 locality : null # Alexandria region : # VA postalCode : # 23242 country : # US notify : True itemDesc : null # will be honored if set, else hourly will provide This allows hourly to access your environment variables and the pem file you created above. Any of these parameters can be overridden when you run hourly. Here are some examples. hourly-report invoice=btcpay btcpay.pem=<private key> hourly-report invoice=btcpay btcpay.pem=/path/to/other/btcpayserver.pem hourly-report invoice=btcpay btcpay.host=https://myprivateserver.com Hourly Invoicing # If you configured hourly with BTCPay, you can generate an invoice for your git repo in a given date range. Here is what that looks like when applied to the hourly repo: hourly-report invoice=btcpay payment=btcpay repo.start_date=\"Jan 1, 2020\" repo.end_date=\"Jan 6, 2020\" Processing timesheet for Asher Pembroke pay period: 2020-01-03 18:44:04-05:00 -> 2020-01-05 18:34:41-05:00 ignoring pro bono TimeIn LogIn email TimeOut LogOut email TimeDelta Hours 0 2020-01-03 18:44:04-05:00 clock-in apembroke@gmail.com 2020-01-03 20:31:57-05:00 clock-out apembroke@gmail.com 01:47:53 1.798056 1 2020-01-03 20:45:54-05:00 clock-in apembroke@gmail.com 2020-01-03 22:40:56-05:00 clock-out apembroke@gmail.com 01:55:02 1.917222 2 2020-01-04 13:16:11-05:00 clock-in apembroke@gmail.com 2020-01-04 14:01:43-05:00 clock-out apembroke@gmail.com 00:45:32 0.758889 3 2020-01-04 14:55:18-05:00 clock-in apembroke@gmail.com 2020-01-04 16:35:04-05:00 clock-out apembroke@gmail.com 01:39:46 1.662778 4 2020-01-04 19:56:53-05:00 clock-in apembroke@gmail.com 2020-01-04 21:06:20-05:00 clock-out apembroke@gmail.com 01:09:27 1.157500 5 2020-01-04 23:59:21-05:00 clock-in apembroke@gmail.com 2020-01-05 03:59:59-05:00 clock-out apembroke@gmail.com 04:00:38 4.010556 6 2020-01-05 16:32:33-05:00 clock-in apembroke@gmail.com 2020-01-05 17:03:22-05:00 clock-out apembroke@gmail.com 00:30:49 0.513611 7 2020-01-05 17:29:01-05:00 clock-in apembroke@gmail.com 2020-01-05 18:34:41-05:00 clock-out apembroke@gmail.com 01:05:40 1.094444 0 days 12:54:47, 12.91 hours worked 1291.31 USD generating invoice for current user Asher Pembroke buyer: address1: null address2: null country: null email: null locality: null name: null notify: true phone: null postalCode: null region: null currency: USD extendedNotifications: true fullNotifications: true itemDesc: 12.91 hours worked from 2020-01-03T18:44:04-05:00 to 2020-01-05T18:34:41-05:00 notificationEmail: null notificationURL: null orderId: null price: 1291.3055555555554 redirectURL: null transactionSpeed: medium Is this correct? (yes/n)yes Success! Your invoice may be paid here: https://btc.exitpay.org/invoice?id=MoSbFujB7AwcrvfMN21gGC Navigate to the payment url provided:","title":"Btcpayserver"},{"location":"btcpayserver.html#btcpay","text":"","title":"BTCPay"},{"location":"btcpayserver.html#background","text":"BTCPay is a decentralized payment processing platform for accepting cryptocurrency. With BTCpay integration, you can issue invoices and receive crypto payments with maximum privacy and minimal cost. You can use a third-party provider or host it yourself - the only difference will be the domain name used to create the local client.","title":"Background"},{"location":"btcpayserver.html#setup","text":"First you will need to register and create a store on a BTCPay server . There are a few free ones listed on btcpayserver.org , but please use caution when choosing a free service, as there are privacy trade-offs to consider. For maximum privacy and security, host one yourself. Once you've chosen a server, connect a bitcoin wallet to your new store. This can be done in your store's general settings, under Derivation Scheme , where you provide your wallet's xpubkey - BTCPay Server uses this key to generate a unique payment address for every invoice issued. Warning A legitimate BTCPay Server should only ask for your wallet's xpubkey and NEVER YOUR PRIVATE KEY Info BTCPay also supports Lightning invoices, which allows for instant settlement. This involves some tradeoffs in security and availability. Then you will need to install the btcpay-python client pip install btcpay-python","title":"Setup"},{"location":"btcpayserver.html#pairing-with-btcpay-server","text":"Follow these pairing instructions from the kind BTCPay developers. Note These instructions correspond to \"The manual way\" - we want to be able to create a btcpay client on-demand without storing it in a database. I'm essentially repeating their instructions below:","title":"Pairing with BTCPay server"},{"location":"btcpayserver.html#step-1-get-a-pairing-code","text":"On your BTCPay server, browse to Stores > Store settings > Access tokens > Create new token Fill in the form: Label: Public key: leave blank Click save and then copy the 7 digit pairing_code from the success page","title":"Step 1 - Get a pairing code"},{"location":"btcpayserver.html#step-2-generate-a-private-key","text":"This can be done with the following code: from btcpay import crypto privkey = crypto . generate_privkey () with open ( 'btcpayserver.pem' , 'w' ) as pem : pem . write ( privkey ) Here we store the private key in a PEM file. By default, hourly will look for btcpayserver.pem in the top level of your git repo, but you can use a different name. Warning Do not add the pem file to your git repo! List it in your .gitignore so you don't do so by accident.","title":"Step 2 - Generate a private key"},{"location":"btcpayserver.html#step-3-create-a-client","text":"Create a client using host url of your btcpayserver (e.g. https://btc.exitpay.org) and private key: client = BTCPayClient ( host = host_url , pem = privkey ) Store your server's host url in the environment variable BTCPAYSERVER_HOST .","title":"Step 3 - Create a client"},{"location":"btcpayserver.html#step-4-generate-a-pairing-token","text":"using the pairing code from Step 1 token = client . pair_client ( pairing_code ) merchant_token = token [ 'merchant' ] Save the merchant_token as an environment variable BTCPAYSERVER_MERCHANT","title":"Step 4 - Generate a pairing token"},{"location":"btcpayserver.html#step-5-recreate-the-client","text":"Whenever you like: client = BTCPayClient ( host = host_store , pem = privkey , tokens = token , )","title":"Step 5 - Recreate the client"},{"location":"btcpayserver.html#step-6-generate-a-test-invoice","text":"Assuming you have completed the steps to connect a wallet to your btcpayserver, you should be able to run the following code to generate an invoice. new_invoice = client . create_invoice ({ \"price\" : 20 , \"currency\" : \"USD\" }) print ( new_invoice [ 'url' ]) This should give you a payment url you can email to your client/employer. Depending on how you set up your BTCPay Server, the invoice will only be valid for a short period of time (default is 15 minutes). There is a trade-off here: a short time period mitigates the risk of currency fluctuation, but requires that the client/employer must act quickly to pay the invoice.","title":"Step 6 - Generate a test invoice"},{"location":"btcpayserver.html#hourly-configuration","text":"Hourly creates a BTCPayClient through the following configuration: # for invoice spec, see https://bitpay.com/api/#rest-api-resources-invoices invoice : btcpay : host : ${env:BTCPAYSERVER_HOST} tokens : merchant : ${env:BTCPAYSERVER_MERCHANT} pem : btcpayserver.pem # file holding btcpayserver private key return_status : false invoice : currency : null # will be honored if set price : null # will be honored if set, else determined by wage orderId : null fullNotifications : True extendedNotifications : True transactionSpeed : medium notificationURL : null # https://mywebhook.com notificationEmail : null # myemail@email.com redirectURL : null # https://yourredirecturl.com buyer : email : null # fox.mulder@trustno.one name : null # Fox Mulder phone : null # 555-123-456 address1 : null # 2630 Hegal Place address2 : null # Apt 42 locality : null # Alexandria region : # VA postalCode : # 23242 country : # US notify : True itemDesc : null # will be honored if set, else hourly will provide This allows hourly to access your environment variables and the pem file you created above. Any of these parameters can be overridden when you run hourly. Here are some examples. hourly-report invoice=btcpay btcpay.pem=<private key> hourly-report invoice=btcpay btcpay.pem=/path/to/other/btcpayserver.pem hourly-report invoice=btcpay btcpay.host=https://myprivateserver.com","title":"Hourly configuration"},{"location":"btcpayserver.html#hourly-invoicing","text":"If you configured hourly with BTCPay, you can generate an invoice for your git repo in a given date range. Here is what that looks like when applied to the hourly repo: hourly-report invoice=btcpay payment=btcpay repo.start_date=\"Jan 1, 2020\" repo.end_date=\"Jan 6, 2020\" Processing timesheet for Asher Pembroke pay period: 2020-01-03 18:44:04-05:00 -> 2020-01-05 18:34:41-05:00 ignoring pro bono TimeIn LogIn email TimeOut LogOut email TimeDelta Hours 0 2020-01-03 18:44:04-05:00 clock-in apembroke@gmail.com 2020-01-03 20:31:57-05:00 clock-out apembroke@gmail.com 01:47:53 1.798056 1 2020-01-03 20:45:54-05:00 clock-in apembroke@gmail.com 2020-01-03 22:40:56-05:00 clock-out apembroke@gmail.com 01:55:02 1.917222 2 2020-01-04 13:16:11-05:00 clock-in apembroke@gmail.com 2020-01-04 14:01:43-05:00 clock-out apembroke@gmail.com 00:45:32 0.758889 3 2020-01-04 14:55:18-05:00 clock-in apembroke@gmail.com 2020-01-04 16:35:04-05:00 clock-out apembroke@gmail.com 01:39:46 1.662778 4 2020-01-04 19:56:53-05:00 clock-in apembroke@gmail.com 2020-01-04 21:06:20-05:00 clock-out apembroke@gmail.com 01:09:27 1.157500 5 2020-01-04 23:59:21-05:00 clock-in apembroke@gmail.com 2020-01-05 03:59:59-05:00 clock-out apembroke@gmail.com 04:00:38 4.010556 6 2020-01-05 16:32:33-05:00 clock-in apembroke@gmail.com 2020-01-05 17:03:22-05:00 clock-out apembroke@gmail.com 00:30:49 0.513611 7 2020-01-05 17:29:01-05:00 clock-in apembroke@gmail.com 2020-01-05 18:34:41-05:00 clock-out apembroke@gmail.com 01:05:40 1.094444 0 days 12:54:47, 12.91 hours worked 1291.31 USD generating invoice for current user Asher Pembroke buyer: address1: null address2: null country: null email: null locality: null name: null notify: true phone: null postalCode: null region: null currency: USD extendedNotifications: true fullNotifications: true itemDesc: 12.91 hours worked from 2020-01-03T18:44:04-05:00 to 2020-01-05T18:34:41-05:00 notificationEmail: null notificationURL: null orderId: null price: 1291.3055555555554 redirectURL: null transactionSpeed: medium Is this correct? (yes/n)yes Success! Your invoice may be paid here: https://btc.exitpay.org/invoice?id=MoSbFujB7AwcrvfMN21gGC Navigate to the payment url provided:","title":"Hourly Invoicing"},{"location":"press-release.html","text":"Hourly integrates BTCPayserver # Hourly is a command-line time tracking tool that lets developers clock in and out of git repos, create timesheets, visualize workloads, and issue invoices, all by creating and parsing commit messages. Hourly is privacy-focused: it won't spy on you, but assumes you report honestly. The new integration with Stripe and BTCPay-server means you can issue lightning, bitcoin, or fiat invoices in a single command. Site - https://asherp.github.io/hourly Github - https://github.com/asherp/hourly Install - pip install hourly","title":"Press release"},{"location":"press-release.html#hourly-integrates-btcpayserver","text":"Hourly is a command-line time tracking tool that lets developers clock in and out of git repos, create timesheets, visualize workloads, and issue invoices, all by creating and parsing commit messages. Hourly is privacy-focused: it won't spy on you, but assumes you report honestly. The new integration with Stripe and BTCPay-server means you can issue lightning, bitcoin, or fiat invoices in a single command. Site - https://asherp.github.io/hourly Github - https://github.com/asherp/hourly Install - pip install hourly","title":"Hourly integrates BTCPayserver"},{"location":"stripe.html","text":"Stripe # Stripe is a popular global payment processing platform for credit cards. They have an invoice API that allows hourly to issue invoices on your behalf in a single command: hourly-report invoice=stripe stripe.customer.email=my.client@momandpop.com Stripe Setup # Step 1 - install the stripe python api: # pip install --upgrade stripe Step 2 - Create a stripe account # You will need an account at Stripe . Be sure to follow the steps for a developer looking to handle one-time payments. You should also set up your invoice template settings . Step 3 - Set environment variables # From the Stripe dashboard : copy the Secret key and set it as an environment variable STRIPE_API_SECRET_KEY You can also paste in the Secret key later as a command-line argument argument to hourly: stripe.secret_key=<your stripe secret key> Warning You will probably want to use your test_ API keys first! Hourly Configuration # Hourly provides the following default configuration for stripe invoices: invoice : # see https://stripe.com/docs/billing/invoices/create-invoice#python stripe : secret_key : ${env:STRIPE_API_SECRET_KEY} customer : name : null email : null description : null customer_id : null # skips customer creation if set invoice_item : customer : # overridden by customer_id amount : # overrides earnings currency : # overrides compensation currency description : # overrides <hours worked> from repo.start_date to repo.end_date invoice : customer : # overridden by customer_id collection_method : send_invoice days_until_due : 30 auto_advance : True # auto-finalize this draft after ~1 hour. footer : Time sheet generated by hourly send_invoice : true # sends invoice to customer.email immediately return_status : false logging : 40 # https://docs.python.org/3/library/logging.html#logging-level The following fields are subsets of stripe's own API, which has additional fields you can use: invoice_item customer invoice Any of the defaults can be overridden, either at command line or by your project's configuration override . However, stripe.customer.email is a required field. Generating Stripe invoices # To generate a stripe invoice for your repo, you will need to specify an email address. Hourly will prepare an invoice and ask for confirmation. Here is an example of what that looks like when I run hourly on the hourly repo: hourly-report invoice=stripe repo.start_date=\"Jan 1, 2020\" stripe.customer.email=apembroke+hourly@gmail.com\" 1 days 04:02:14, 28.04 hours worked 2803.72 USD Generating stripe invoice for Asher Pembroke creating new customer new customer_id: cus_GVy3BWS792lu4D customer: description: null email: apembroke+hourly@gmail.com name: null customer_id: cus_GVy3BWS792lu4D invoice: auto_advance: false collection_method: send_invoice customer: cus_GVy3BWS792lu4D days_until_due: 30 footer: Time sheet generated by hourly invoice_item: amount: 280373 currency: usd customer: cus_GVy3BWS792lu4D description: 28.04 hours worked from 2020-01-03T18:44:04-05:00 to 2020-01-09T02:04:18-05:00 logging: 40 return_status: false secret_key: ${env:STRIPE_API_SECRET_KEY} send_invoice: true Is this correct? (yes/n): yes Success! Invoice will be sent to apembroke+hourly@gmail.com Invoice may be paid at https://pay.stripe.com/invoice/<---- redacted -----> View your invoice at https://dashboard.stripe.com Note I have redacted actual payment URL The recipient should get an email from stripe to pay by credit card. You can test credit card payment using one of their testing cards . Meanwhile, visiting the url should show you a page like this:","title":"Stripe"},{"location":"stripe.html#stripe","text":"Stripe is a popular global payment processing platform for credit cards. They have an invoice API that allows hourly to issue invoices on your behalf in a single command: hourly-report invoice=stripe stripe.customer.email=my.client@momandpop.com","title":"Stripe"},{"location":"stripe.html#stripe-setup","text":"","title":"Stripe Setup"},{"location":"stripe.html#step-1-install-the-stripe-python-api","text":"pip install --upgrade stripe","title":"Step 1 - install the stripe python api:"},{"location":"stripe.html#step-2-create-a-stripe-account","text":"You will need an account at Stripe . Be sure to follow the steps for a developer looking to handle one-time payments. You should also set up your invoice template settings .","title":"Step 2 - Create a stripe account"},{"location":"stripe.html#step-3-set-environment-variables","text":"From the Stripe dashboard : copy the Secret key and set it as an environment variable STRIPE_API_SECRET_KEY You can also paste in the Secret key later as a command-line argument argument to hourly: stripe.secret_key=<your stripe secret key> Warning You will probably want to use your test_ API keys first!","title":"Step 3 - Set environment variables"},{"location":"stripe.html#hourly-configuration","text":"Hourly provides the following default configuration for stripe invoices: invoice : # see https://stripe.com/docs/billing/invoices/create-invoice#python stripe : secret_key : ${env:STRIPE_API_SECRET_KEY} customer : name : null email : null description : null customer_id : null # skips customer creation if set invoice_item : customer : # overridden by customer_id amount : # overrides earnings currency : # overrides compensation currency description : # overrides <hours worked> from repo.start_date to repo.end_date invoice : customer : # overridden by customer_id collection_method : send_invoice days_until_due : 30 auto_advance : True # auto-finalize this draft after ~1 hour. footer : Time sheet generated by hourly send_invoice : true # sends invoice to customer.email immediately return_status : false logging : 40 # https://docs.python.org/3/library/logging.html#logging-level The following fields are subsets of stripe's own API, which has additional fields you can use: invoice_item customer invoice Any of the defaults can be overridden, either at command line or by your project's configuration override . However, stripe.customer.email is a required field.","title":"Hourly Configuration"},{"location":"stripe.html#generating-stripe-invoices","text":"To generate a stripe invoice for your repo, you will need to specify an email address. Hourly will prepare an invoice and ask for confirmation. Here is an example of what that looks like when I run hourly on the hourly repo: hourly-report invoice=stripe repo.start_date=\"Jan 1, 2020\" stripe.customer.email=apembroke+hourly@gmail.com\" 1 days 04:02:14, 28.04 hours worked 2803.72 USD Generating stripe invoice for Asher Pembroke creating new customer new customer_id: cus_GVy3BWS792lu4D customer: description: null email: apembroke+hourly@gmail.com name: null customer_id: cus_GVy3BWS792lu4D invoice: auto_advance: false collection_method: send_invoice customer: cus_GVy3BWS792lu4D days_until_due: 30 footer: Time sheet generated by hourly invoice_item: amount: 280373 currency: usd customer: cus_GVy3BWS792lu4D description: 28.04 hours worked from 2020-01-03T18:44:04-05:00 to 2020-01-09T02:04:18-05:00 logging: 40 return_status: false secret_key: ${env:STRIPE_API_SECRET_KEY} send_invoice: true Is this correct? (yes/n): yes Success! Invoice will be sent to apembroke+hourly@gmail.com Invoice may be paid at https://pay.stripe.com/invoice/<---- redacted -----> View your invoice at https://dashboard.stripe.com Note I have redacted actual payment URL The recipient should get an email from stripe to pay by credit card. You can test credit card payment using one of their testing cards . Meanwhile, visiting the url should show you a page like this:","title":"Generating Stripe invoices"}]}